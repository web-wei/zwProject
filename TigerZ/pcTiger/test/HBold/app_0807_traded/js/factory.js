/**
 * Created by jvid on 2016/10/25.
 */
var _JSON1 = {
    "all":[
        {
            "en":"Auckland",
            "cn":"奥克兰"
        },
        {
            "en":"Wellington",
            "cn":"惠灵顿"
        },
        {
            "en":"Canterbury",
            "cn":"坎特伯雷"
        },
        {
            "en":"Northland",
            "cn":"北部地区"
        },
        {
            "en":"Bay of Plenty",
            "cn":"丰盛湾"
        },
        {
            "en":"Waikato",
            "cn":"怀卡托"
        },
        {
            "en":"Hawkes Bay",
            "cn":"霍克斯湾"
        },
        {
            "en":"Taranaki",
            "cn":"塔拉纳基"
        },
        {
            "en":"Manawatu / Wanganui",
            "cn":"马纳瓦图/旺加努伊"
        },
        {
            "en":"Wairarapa",
            "cn":"怀拉拉帕"
        },
        {
            "en":"Southland",
            "cn":"南岛地区"
        }
    ],
    "Northland":{
        "hotSearch":[
            {
                "en":"Far North",
                "cn":"Far North"
            },
            {
                "en":"Whangarei",
                "cn":"Whangarei"
            },
            {
                "en":"Kaipara",
                "cn":"Kaipara"
            }
        ],
        "city":[
            "Far North",
            "Kaipara",
            "Whangarei"
        ],
        "school":{
            "Far North":[

            ],
            "Kaipara":[

            ],
            "Whangarei":[

            ]
        },
        "suburb":{
            "Far North":[
                "Kohukohu",
                "Kerikeri",
                "Kaikohe",
                "Cable Bay",
                "Nukutawhiti",
                "Waimate North",
                "Coopers Beach",
                "Matauri Bay",
                "Ohaeawai",
                "Haruru",
                "Motatau",
                "Ahipara",
                "Pipiwai",
                "Awarua",
                "Matawaia",
                "Taipa",
                "Peria",
                "Russell",
                "Moerewa",
                "Paewhenua Island",
                "Ngawha Springs",
                "Pakotai",
                "Whangaroa",
                "Kaeo",
                "Kaingaroa",
                "Waitangi",
                "Towai",
                "Pakaraka",
                "Opua",
                "Maromaku",
                "Waiomio",
                "Kaitaia",
                "Paihia",
                "Pukewharariki",
                "Punakitere Valley",
                "Horeke",
                "Kaikohe Surrounds",
                "Kaitaia Surrounds",
                "Kawakawa Surrounds",
                "Russell Surrounds",
                "Kerikeri Surrounds",
                "North Hokianga",
                "Mangonui",
                "Taupo Bay/Totara North",
                "Awanui",
                "Houhora",
                "Herekino",
                "Opononi",
                "Rawene",
                "Mangamuka",
                "Karikari Peninsula",
                "Kawakawa",
                "Omapere",
                "Kaikohe West",
                "Whangaroa/Kaeo Surrounds",
                "Paihia Surrounds",
                "Hokianga Surrounds",
                "Okaihau",
                "Mangonui Surrounds",
                "South Hokianga",
                "Takahue",
                "Pukenui"
            ],
            "Kaipara":[
                "Mangawhai",
                "Ruawai",
                "Pouto",
                "Mangawhai Heads",
                "Maungaturoto",
                "Te Kopuru",
                "Arapohue",
                "Tinopai",
                "Whakapirau",
                "Mareretu",
                "Dargaville Surrounds",
                "Otamatea Surrounds",
                "Ruawai Surrounds",
                "Waipoua",
                "Dargaville",
                "Tangiteroria",
                "Kaiwaka",
                "Topuni",
                "Paparoa",
                "Matakohe"
            ],
            "Whangarei":[
                "One Tree Point",
                "Kensington",
                "Parua Bay",
                "Kiripaka",
                "Tamaterau",
                "Poroti",
                "Tikipunga",
                "Langs Beach",
                "Morningside",
                "Whareora",
                "Horahora",
                "Avenues",
                "Whau Valley",
                "Kokopu",
                "Riverside",
                "Otangarei",
                "Whangarei Central",
                "Port Whangarei",
                "Ruakaka",
                "Woodhill",
                "Maungatapere",
                "Waipu",
                "Pataua",
                "Kauri",
                "Otaika",
                "Hikurangi",
                "Matapouri",
                "Tutukaka",
                "Whananaki",
                "Marsden Point",
                "Ngunguru",
                "Regent",
                "Raumanga",
                "Ruatangata",
                "Oakura Coast",
                "Whangarei Surrounds",
                "Onerahi",
                "Glenbervie",
                "Okara",
                "Parahaki",
                "Kamo",
                "Whakapara",
                "Maunu",
                "Mangapai and Surrounds",
                "Whangarei Heads",
                "Hukerenui and Surrounds",
                "Whangarei Area",
                "Maungakaramea",
                "Portland",
                "Oakleigh",
                "Matarau"
            ]
        }
    },
    "Southland":{
        "hotSearch":[
            {
                "en":"Invercargill City",
                "cn":"Invercargill City"
            },
            {
                "en":"Southland",
                "cn":"Southland"
            },
            {
                "en":"Gore",
                "cn":"Gore"
            }
        ],
        "city":[
            "Southland",
            "Gore",
            "Invercargill City"
        ],
        "school":{
            "Southland":[

            ],
            "Gore":[

            ],
            "Invercargill City":[

            ]
        },
        "suburb":{
            "Southland":[
                "Woodlands",
                "Riverton & Surrounds",
                "Winton Surrounds",
                "Wyndham Surrounds",
                "Te Anau Surrounds",
                "Lumsden Surrounds",
                "Stewart Island",
                "Orepuki",
                "Nightcaps",
                "Ohai",
                "Otautau",
                "Thornbury",
                "Wallacetown",
                "Tuatapere",
                "Mossburn",
                "Manapouri",
                "Riversdale",
                "Waianiwa",
                "Balfour",
                "Dipton",
                "Edendale",
                "Garston",
                "Halfmoon Bay",
                "Lumsden",
                "Riverton",
                "Te Anau",
                "Waikaia",
                "Winton",
                "Wyndham",
                "Castlerock",
                "Colac Bay",
                "Hedgehope"
            ],
            "Gore":[
                "Mataura",
                "Waikaka",
                "Pukerau",
                "Gore Surrounds",
                "Gore"
            ],
            "Invercargill City":[
                "Makarewa",
                "Ryal Bush",
                "Appleby",
                "Rockdale",
                "Waikiwi",
                "Windsor",
                "Newfield",
                "Richmond",
                "Waverley",
                "Prestonville",
                "Kingswell",
                "Georgetown",
                "Grasmere",
                "Kew",
                "Avenal",
                "West Plains",
                "Strathern",
                "Gladstone",
                "Rosedale",
                "Hargest",
                "Heidelberg",
                "Underwood",
                "Hawthorndale",
                "Glengarry",
                "Turnbull Thomson Park",
                "Invercargill Surrounds",
                "Oreti Beach",
                "Otatara",
                "Bluff",
                "Awarua",
                "Waimatua",
                "Invercargill",
                "Clifton",
                "Tisbury",
                "Mill Road",
                "Myross Bush",
                "Roslyn Bush",
                "Lorneville",
                "Ascot"
            ]
        }
    },
    "Canterbury":{
        "hotSearch":[
            {
                "en":"Christchurch City",
                "cn":"基督城"
            },
            {
                "en":"Waimakariri",
                "cn":"Waimakariri"
            },
            {
                "en":"Selwyn",
                "cn":"Selwyn"
            },
            {
                "en":"Timaru",
                "cn":"Timaru"
            }
        ],
        "city":[
            "Waimakariri",
            "Waimate",
            "Timaru",
            "Selwyn",
            "Banks Peninsula",
            "Ashburton",
            "Christchurch City",
            "Hurunui",
            "Mackenzie"
        ],
        "school":{
            "Christchurch City":[
                {
                    "name":"Christchurch Boys' High School",
                    "id":"5840ea261cab461c20cf534e"
                },
                {
                    "name":"Christchurch Girls' High School | Te Kura o Hine Wairoa",
                    "id":"5840ea6b1cab461c20cf566c"
                },
                {
                    "name":"Middleton Grange School (Years 1 - 10)",
                    "id":"5840ea981cab461c20cf58aa"
                },
                {
                    "name":"Middleton Grange School (Years 11 - 13)",
                    "id":"5840ea981cab461c20cf58ab"
                }
            ],
            "Banks Peninsula":[

            ],
            "Hurunui":[

            ],
            "Selwyn":[

            ],
            "Mackenzie":[

            ],
            "Ashburton":[

            ],
            "Waimakariri":[

            ],
            "Waimate":[

            ],
            "Timaru":[

            ]
        },
        "suburb":{
            "Christchurch City":[
                "Islington",
                "Parklands",
                "Redcliffs",
                "Ilam",
                "Styx",
                "Shirley",
                "Saint Martins",
                "Cashmere",
                "Upper Riccarton",
                "Mairehau",
                "Clifton",
                "Coutts Island",
                "Avondale",
                "Huntsbury",
                "Saint Albans",
                "North New Brighton",
                "Middleton",
                "Phillipstown",
                "Mount Pleasant",
                "Christchurch Central",
                "Sydenham",
                "Westmorland",
                "Bromley",
                "Christchurch Airport",
                "Spreydon",
                "Northcote",
                "Somerfield",
                "Avonhead",
                "Russley",
                "Cracroft",
                "Heathcote Valley",
                "Harewood",
                "Hillsborough",
                "Bryndwr",
                "Strowan",
                "Halswell",
                "Ferrymead",
                "Avonside",
                "Moncks Bay",
                "Hillmorton",
                "New Brighton",
                "Aranui",
                "Waltham",
                "Bishopdale",
                "South New Brighton",
                "Marshland",
                "Kainga",
                "Richmond Hill",
                "Templeton",
                "Sockburn",
                "Redwood",
                "Wigram",
                "Papanui",
                "Northwood",
                "Sumner",
                "Southshore",
                "Opawa",
                "Waimairi Beach",
                "Broomfield",
                "Burnside",
                "Linwood",
                "Beckenham",
                "Kennedys Bush",
                "Addington",
                "Merivale",
                "Burwood",
                "Richmond",
                "Edgeware",
                "Belfast",
                "Bexley",
                "Hoon Hay",
                "Hei Hei",
                "Dallington",
                "Casebrook",
                "Riccarton",
                "Woolston",
                "Wainoni",
                "Fendalton",
                "Christchurch Surrounds",
                "Yaldhurst",
                "Hornby",
                "Brooklands",
                "Spencerville",
                "Aidanfield"
            ],
            "Banks Peninsula":[
                "Corsair Bay",
                "Cass Bay",
                "Takamatua",
                "Pigeon Bay",
                "Charteris Bay",
                "Lyttelton",
                "Robinsons Bay",
                "French Farm",
                "Diamond Harbour",
                "Okains Bay",
                "Purau",
                "Birdlings Flat",
                "Duvauchelle",
                "Port Levy",
                "Little Akaloa",
                "Le Bons Bay",
                "Banks Peninsula Surrounds",
                "Akaroa",
                "Governors Bay",
                "Little River",
                "Wainui"
            ],
            "Selwyn":[
                "Windwhistle",
                "Southbridge",
                "Tai Tapu",
                "Lake Coleridge",
                "Glentunnel",
                "Doyleston",
                "Castle Hill",
                "Lansdowne",
                "Prebbleton",
                "Kirwee",
                "Waddington",
                "West Melton",
                "Springston",
                "Rolleston",
                "Malvern Hills",
                "Burnham",
                "Hororata",
                "Sheffield",
                "Leeston",
                "Lake Pearson",
                "Selwyn Surrounds",
                "Motukarara",
                "Arthur's Pass",
                "Darfield",
                "Dunsandel",
                "Lincoln",
                "Springfield",
                "Craigieburn",
                "Weedons"
            ],
            "Hurunui":[
                "Pyramid Valley",
                "Balcairn",
                "Virginia",
                "Rotherham",
                "Leslie Hills",
                "Hurunui",
                "Scargill",
                "MacDonald Downs",
                "Waikari",
                "Leithfield",
                "Hurunui Surrounds",
                "Hanmer Springs",
                "Amberley",
                "Cheviot",
                "Culverden",
                "Gore Bay",
                "Hawarden",
                "Hundalee",
                "Waipara",
                "Motunau",
                "Waiau",
                "Lewis Pass",
                "Greta Valley",
                "Lyford"
            ],
            "Mackenzie":[
                "Albury",
                "Mt Cook",
                "Mackenzie Surrounds",
                "Lake Tekapo",
                "Fairlie",
                "Twizel"
            ],
            "Waimakariri":[
                "Waikuku Beach",
                "Tuahiwi",
                "Clarkville",
                "Ashley",
                "Ohoka",
                "Pegasus",
                "Cust",
                "Waikuku",
                "Sefton",
                "Swannanoa",
                "Waimakariri Surrounds",
                "Oxford",
                "West Eyreton",
                "Woodend",
                "Glentui",
                "Kaiapoi",
                "Rangiora",
                "Okuku",
                "Loburn",
                "Fernside",
                "The Pines Beach"
            ],
            "Waimate":[
                "Otaio",
                "Morven",
                "Waitangi",
                "Ikawai",
                "Maungati",
                "Hunter",
                "Makikihi",
                "Waihao Downs",
                "Elephant Hill",
                "Kirkliston",
                "Glenavy",
                "Waihaorunga",
                "Hunters Hills",
                "Waimate",
                "Hakataramea",
                "St Andrews",
                "Waimate Surrounds",
                "Saint Andrews",
                "Hakataramea Valley"
            ],
            "Ashburton":[
                "Netherby",
                "Huntingdon/Lake Hood",
                "Lauriston",
                "Allenton",
                "Ashburton",
                "Hampstead",
                "Winchmore",
                "Tinwald",
                "Ashburton Surrounds",
                "Mayfield",
                "Methven",
                "Mount Somers",
                "Rakaia",
                "Hinds",
                "Lismore",
                "Fairton",
                "Chertsey",
                "Elgin",
                "Westerfield",
                "Winslow",
                "Eiffelton"
            ],
            "Timaru":[
                "Glenwood",
                "Kensington",
                "Maori Hill",
                "Smithfield",
                "Highfield",
                "Rosewill",
                "Redruth",
                "Watlington",
                "Winchester",
                "Waimataitai",
                "Marchwiel",
                "Seaview",
                "Parkside",
                "Clandeboye",
                "West End",
                "Gleniti",
                "Timaru Surrounds",
                "Geraldine",
                "Fairview",
                "Pareora",
                "Mesopotamia",
                "Washdyke",
                "Hadlow",
                "Timaru Central",
                "Levels",
                "Temuka",
                "Pleasant Point"
            ]
        }
    },
    "Bay of Plenty":{
        "hotSearch":[
            {
                "en":"Tauranga",
                "cn":"Tauranga"
            },
            {
                "en":"Western Bay Of Plenty",
                "cn":"Western Bay Of Plenty"
            },
            {
                "en":"Rotorua",
                "cn":"Rotorua"
            },
            {
                "en":"Whakatane",
                "cn":"Whakatane"
            }
        ],
        "city":[
            "Kawerau",
            "Opotiki",
            "Rotorua",
            "Tauranga",
            "Western Bay Of Plenty",
            "Whakatane"
        ],
        "school":{
            "Whakatane":[

            ],
            "Kawerau":[

            ],
            "Rotorua":[

            ],
            "Tauranga":[

            ],
            "Western Bay Of Plenty":[

            ],
            "Opotiki":[

            ]
        },
        "suburb":{
            "Whakatane":[
                "Coastlands",
                "Manawahe",
                "Matahi",
                "Taneatua",
                "Otakiri",
                "Rotoma",
                "Thornton",
                "Edgecumbe",
                "Whakatane Surrounds",
                "Matata",
                "Ohope",
                "Whakatane",
                "Murupara Surrounds",
                "Waimana",
                "Te Teko",
                "Murupara"
            ],
            "Kawerau":[
                "Kawerau"
            ],
            "Rotorua":[
                "Springfield",
                "Westbrook",
                "Okere Falls",
                "Hillcrest",
                "Glenholme",
                "Lake Rotoma",
                "Mangakakahi",
                "Ngapuna",
                "Pukehangi",
                "Atiamuri",
                "Mourea",
                "Fordlands",
                "Hamurana",
                "Koutu",
                "Hannahs Bay",
                "Ohinemutu",
                "Tihiotonga",
                "Tikitere",
                "Lake Okareka",
                "Waikite Valley",
                "Fenton Park",
                "Rotorua Central",
                "Lake Tarawera",
                "Holdens Bay",
                "Lynmore",
                "Broadlands",
                "Selwyn Heights",
                "Utuhina",
                "Owhata",
                "Fairy Springs",
                "Kawaha Point",
                "Western Heights",
                "Mamaku",
                "Ngakuru",
                "Victoria",
                "Rotorua Surrounds",
                "Lake Areas",
                "Ngongotaha",
                "Reporoa and Surrounds",
                "Horohoro",
                "Whakarewarewa",
                "Rerewhakaaitu",
                "Rotoiti Forest",
                "Lake Rotoiti",
                "Lake Rotoehu"
            ],
            "Tauranga":[
                "Tauranga South",
                "Judea",
                "Maungatapu",
                "Poike",
                "Tauranga Central",
                "Gate Pa",
                "Hairini",
                "Bellevue",
                "Otumoetai",
                "Matua",
                "Brookfield",
                "Parkvale",
                "Tauriko",
                "Mount Maunganui",
                "Greerton",
                "Matapihi",
                "Bethlehem",
                "Tauranga Surrounds",
                "Welcome Bay",
                "Papamoa",
                "Avenues",
                "Pyes Pa",
                "Oropi",
                "Ohauiti"
            ],
            "Western Bay Of Plenty":[
                "Pyes Pa",
                "Pongakawa",
                "Ohauiti",
                "Wairoa",
                "Paengaroa",
                "Te Puna",
                "Omokoroa",
                "Oropi",
                "Maketu",
                "Pukehina",
                "Aongatete",
                "Whakamarama",
                "Te Puke",
                "Kaimai",
                "Waihi Beach",
                "Athenree",
                "Katikati",
                "Western BOP Surrounds",
                "Matakana Island",
                "Pahoia"
            ],
            "Opotiki":[
                "Te Kaha",
                "Opotiki Surrounds",
                "Waihau Bay",
                "Opotiki Coastal",
                "Opotiki and Surrounds"
            ]
        }
    },
    "Manawatu / Wanganui":{
        "hotSearch":[
            {
                "en":"Wanganui",
                "cn":"Wanganui"
            },
            {
                "en":"Palmerston North City",
                "cn":"Palmerston North City"
            },
            {
                "en":"Horowhenua",
                "cn":"Horowhenua"
            },
            {
                "en":"Tararua",
                "cn":"Tararua"
            }
        ],
        "city":[
            "Rangitikei",
            "Palmerston North City",
            "Tararua",
            "Wanganui",
            "Manawatu",
            "Horowhenua"
        ],
        "school":{
            "Rangitikei":[

            ],
            "Palmerston North City":[

            ],
            "Wanganui":[

            ],
            "Tararua":[

            ],
            "Manawatu":[

            ],
            "Horowhenua":[

            ]
        },
        "suburb":{
            "Rangitikei":[
                "Koitiata",
                "Hunterville",
                "Turakina",
                "Parewanui",
                "Ratana",
                "Lake Alice",
                "Mangaweka",
                "Rangitikei Surrounds",
                "Marton",
                "Taihape and Surrounds",
                "Bulls"
            ],
            "Palmerston North City":[
                "Hokowhitu",
                "Ashhurst",
                "Takaro",
                "Cloverlea",
                "Whakarongo",
                "Milson",
                "Turitea",
                "Terrace End",
                "Westbrook",
                "Awapuni",
                "West End",
                "Summerhill",
                "Roslyn",
                "Longburn",
                "Kelvin Grove",
                "Palmerston North Central",
                "Aokautere",
                "Massey University",
                "Highbury",
                "Linton",
                "Palmerston North Surrounds",
                "Parklands",
                "Riverdale",
                "Fitzherbert"
            ],
            "Wanganui":[
                "Kakatahi",
                "Wanganui East",
                "Wanganui Central",
                "Gonville",
                "Otamatea",
                "College Estate",
                "Mangamahu",
                "Marybank",
                "Kaitoke",
                "Bastia Hill",
                "Tawhero",
                "Durie Hill",
                "Saint Johns Hill",
                "Westmere",
                "Castlecliff",
                "Springvale",
                "Okoia",
                "Whangaehu",
                "Papaiti",
                "Aramoho",
                "Fordell",
                "Wanganui Surrounds",
                "Putiki",
                "Kai Iwi",
                "Parikino",
                "Brunswick",
                "Matahiwi"
            ],
            "Tararua":[
                "Tiraumea",
                "Norsewood",
                "Dannevirke",
                "Pahiatua",
                "Eketahuna",
                "Woodville",
                "Pongaroa"
            ],
            "Manawatu":[
                "Rongotea",
                "Kairanga",
                "Pohangina",
                "Ohingaiti",
                "Kimbolton",
                "Bunnythorpe",
                "Rangiwahia",
                "Himatangi Beach",
                "Sanson",
                "Tiakitahuna",
                "Tangimoana",
                "Apiti",
                "Newbury",
                "Ohakea",
                "Opiki",
                "Halcombe",
                "Manawatu Surrounds",
                "Feilding",
                "Himatangi",
                "Cheltenham",
                "Waituna West"
            ],
            "Horowhenua":[
                "Tokomaru",
                "Foxton",
                "Moutoa",
                "Waitarere Beach",
                "Foxton Beach",
                "Ohau",
                "Shannon",
                "Horowhenua Surrounds",
                "Levin",
                "Waitarere",
                "Manakau",
                "Waikawa Beach",
                "Hokio Beach"
            ]
        }
    },
    "Wairarapa":{
        "hotSearch":[
            {
                "en":"Masterton",
                "cn":"Masterton"
            },
            {
                "en":"South Wairarapa",
                "cn":"South Wairarapa"
            },
            {
                "en":"Carterton",
                "cn":"Carterton"
            }
        ],
        "city":[
            "Masterton",
            "Carterton",
            "South Wairarapa"
        ],
        "school":{
            "South Wairarapa":[

            ],
            "Masterton":[

            ],
            "Carterton":[

            ]
        },
        "suburb":{
            "South Wairarapa":[
                "Hinakura",
                "Tuturumuri",
                "Cape Palliser",
                "Featherston",
                "Greytown",
                "Martinborough",
                "Pirinoa",
                "Lake Ferry",
                "Tora"
            ],
            "Masterton":[
                "Mangapakeha",
                "Te Whiti",
                "Blairlogie",
                "Bideford",
                "Solway",
                "Whangaehu Valley",
                "Matahiwi",
                "Opaki",
                "Masterton Surrounds",
                "Riversdale Beach",
                "Masterton",
                "Tinui",
                "Upper Plain",
                "Mauriceville",
                "Kiriwhakapapa",
                "Wainuioru",
                "Castlepoint",
                "Mataikona",
                "Otahome"
            ],
            "Carterton":[
                "Carterton Surrounds",
                "Gladstone",
                "Te Wharau",
                "Carterton"
            ]
        }
    },
    "Auckland":{
        "hotSearch":[
            {
                "en":"Auckland City",
                "cn":"中区 City"
            },
            {
                "en":"Manukau City",
                "cn":"东区 Manukau"
            },
            {
                "en":"North Shore City",
                "cn":"北岸 North Shore"
            },
            {
                "en":"Waitakere City",
                "cn":"西区 Waitakere"
            }
        ],
        "city":[
            "Manukau City",
            "Franklin",
            "Auckland City",
            "North Shore City",
            "Papakura",
            "Rodney",
            "Waitakere City",
            "Hauraki Gulf Islands",
            "Waiheke Island"
        ],
        "school":{
            "Franklin":[

            ],
            "North Shore City":[
                {
                    "name":"Rangitoto College",
                    "id":"5840ea5a1cab461c20cf55c8"
                },
                {
                    "name":"Albany Senior High School",
                    "id":"5840ea661cab461c20cf5630"
                },
                {
                    "name":"Long Bay College",
                    "id":"5840ea8f1cab461c20cf5836"
                },
                {
                    "name":"Takapuna Grammar School",
                    "id":"5840eac81cab461c20cf5aff"
                },
                {
                    "name":"Westlake Boys' High School",
                    "id":"5840eae51cab461c20cf5c80"
                },
                {
                    "name":"Westlake Girls' High School",
                    "id":"5840eae51cab461c20cf5c81"
                }
            ],
            "Rodney":[

            ],
            "Hauraki Gulf Islands":[

            ],
            "Manukau City":[
                {
                    "name":"Botany Downs Secondary College",
                    "id":"5840ea1d1cab461c20cf52d0"
                },
                {
                    "name":"Macleans College",
                    "id":"5840ea901cab461c20cf583f"
                }
            ],
            "Waitakere City":[
                {
                    "name":"Hobsonville Point Secondary School",
                    "id":"5840ea771cab461c20cf56f8"
                }
            ],
            "Papakura":[

            ],
            "Auckland City":[
                {
                    "name":"Epsom Girls Grammar School",
                    "id":"5840ea281cab461c20cf5355"
                },
                {
                    "name":"Glendowie College",
                    "id":"5840ea371cab461c20cf5405"
                },
                {
                    "name":"Auckland Grammar",
                    "id":"5840ea661cab461c20cf5633"
                }
            ],
            "Waiheke Island":[

            ]
        },
        "suburb":{
            "Franklin":[
                "Mauku",
                "Te Kohanga",
                "Onewhero",
                "Bombay",
                "Tuakau",
                "Aka Aka",
                "Mangatangi",
                "Whakatiwai",
                "Ararimu",
                "Kingseat",
                "Kaiaua",
                "Clarks Beach",
                "Pukekohe",
                "Mercer",
                "Puni",
                "Hunua",
                "Pollok",
                "Miranda",
                "Ramarama",
                "Manukau Heads",
                "Awhitu",
                "Patumahoe",
                "Paerata",
                "Pukekawa",
                "Waiau Pa",
                "Buckland",
                "Glenbrook",
                "Pokeno",
                "Otaua",
                "Mangatawhiri",
                "Pukekohe East",
                "Karaka",
                "Waiuku",
                "Whangape",
                "Port Waikato",
                "Glen Murray"
            ],
            "North Shore City":[
                "Wairau Valley",
                "Takapuna",
                "Milford",
                "Rothesay Bay",
                "Hillcrest",
                "Northcote Point",
                "Greenhithe",
                "Mairangi Bay",
                "Birkdale",
                "Castor Bay",
                "Long Bay",
                "Pinehill",
                "Torbay",
                "Forrest Hill",
                "Lucas Heights",
                "Waiake",
                "Okura",
                "Belmont",
                "Unsworth Heights",
                "Northcross",
                "Narrow Neck",
                "Sunnynook",
                "Bayview",
                "Schnapper Rock",
                "Chatswood",
                "Fairview Heights",
                "Oteha",
                "Albany",
                "Devonport",
                "Murrays Bay",
                "Browns Bay",
                "Northcote",
                "Totara Vale",
                "Birkenhead",
                "Glenfield",
                "Windsor Park",
                "Bayswater",
                "Campbells Bay",
                "Beach Haven",
                "Paremoremo",
                "Hauraki",
                "Rosedale",
                "Stanley Point"
            ],
            "Rodney":[
                "Wellsford",
                "Tauhoa",
                "Taupaki",
                "Tapora",
                "Whangateau",
                "Makarau",
                "Snells Beach",
                "Woodhill Forest",
                "Point Wells",
                "Parakai",
                "Sandspit",
                "Silverdale",
                "Matakatia",
                "Kumeu",
                "Tawharanui Peninsula",
                "Red Beach",
                "Helensville",
                "Albany Heights",
                "Leigh",
                "Tindalls Beach",
                "Waimauku",
                "Dairy Flat",
                "Tomarata",
                "Coatesville",
                "Manly",
                "Hatfields Beach",
                "Te Arai",
                "Wharehine",
                "Algies Bay",
                "Ti Point",
                "Kaukapakapa",
                "Mahurangi West",
                "Stanmore Bay",
                "Redvale",
                "Waitoki",
                "Pakiri",
                "Riverhead",
                "Port Albert",
                "Muriwai",
                "Army Bay",
                "Stillwater",
                "Wayby Valley",
                "Omaha",
                "Wainui",
                "Orewa",
                "Waiwera",
                "Whangaripo",
                "Te Hana",
                "Mahurangi East",
                "Gulf Harbour",
                "Puhoi",
                "Arkles Bay",
                "Rodney Surrounds",
                "Hibiscus Coast Surrounds",
                "Matakana",
                "Kaipara Flats",
                "Warkworth",
                "South Head",
                "Whangaparaoa",
                "Huapai",
                "Shelly Beach",
                "Millwater"
            ],
            "Hauraki Gulf Islands":[
                "Rakino Island",
                "Great Barrier Island",
                "Kawau Island",
                "Other Islands"
            ],
            "Manukau City":[
                "Somerville",
                "Flat Bush",
                "Pakuranga",
                "Totara Park",
                "Mangere Bridge",
                "Clendon Park",
                "Kawakawa Bay",
                "Beachlands",
                "Huntington Park",
                "Eastern Beach",
                "Howick",
                "Highland Park",
                "Goodwood Heights",
                "Sunnyhills",
                "Manurewa",
                "Cockle Bay",
                "Dannemora",
                "Randwick Park",
                "East Tamaki Heights",
                "Mangere",
                "Middlemore Hospital",
                "Maraetai",
                "Brookby",
                "Northpark",
                "Manukau",
                "Totara Heights",
                "Whitford",
                "Pakuranga Heights",
                "Shelly Park",
                "Clover Park",
                "Orere Point",
                "Ness Valley",
                "Farm Cove",
                "Half Moon Bay",
                "Otara",
                "Auckland Airport",
                "Mangere East",
                "East Tamaki",
                "Wattle Downs",
                "Favona",
                "Manurewa East",
                "Wiri",
                "Alfriston",
                "Burswood",
                "Weymouth",
                "Bucklands Beach",
                "Papatoetoe",
                "Botany Downs",
                "Golflands",
                "Mellons Bay",
                "Shamrock Park",
                "The Gardens",
                "Clevedon",
                "Manukau Heights",
                "Hillpark",
                "Mission Heights"
            ],
            "Waitakere City":[
                "Bethells Beach",
                "Whenuapai",
                "Titirangi",
                "New Lynn",
                "Swanson",
                "Cornwallis",
                "Henderson",
                "Ranui",
                "Te Atatu Peninsula",
                "Hobsonville",
                "Laingholm",
                "Henderson Valley",
                "Oratia",
                "West Harbour",
                "Parau",
                "Glen Eden",
                "Waitakere",
                "Huia",
                "Sunnyvale",
                "Glendene",
                "Kelston",
                "Massey",
                "Waiatarua",
                "Te Atatu South",
                "Green Bay",
                "Karekare",
                "Herald Island",
                "Piha",
                "Westgate"
            ],
            "Papakura":[
                "Red Hill",
                "Rosehill",
                "Ardmore",
                "Runciman",
                "Pahurehure",
                "Opaheke",
                "Drury",
                "Papakura",
                "Takanini",
                "Conifer Grove",
                "Hingaia"
            ],
            "Auckland City":[
                "Saint Heliers",
                "Avondale",
                "One Tree Hill",
                "Kohimarama",
                "Three Kings",
                "Saint Johns",
                "Hillsborough",
                "Mount Roskill",
                "Newmarket",
                "Glen Innes",
                "Grey Lynn",
                "Orakei",
                "Point England",
                "Saint Marys Bay",
                "Kingsland",
                "Ellerslie",
                "Mount Albert",
                "Greenlane",
                "Epsom",
                "Mission Bay",
                "Freemans Bay",
                "New Windsor",
                "Point Chevalier",
                "Meadowbank",
                "Westmere",
                "Mount Eden",
                "Herne Bay",
                "Remuera",
                "Panmure",
                "Penrose",
                "Waterview",
                "Sandringham",
                "Grafton",
                "Western Springs",
                "Mount Wellington",
                "Blockhouse Bay",
                "Onehunga",
                "Eden Terrace",
                "Royal Oak",
                "Glendowie",
                "Auckland Central",
                "Lynfield",
                "Ponsonby",
                "Otahuhu",
                "Parnell",
                "Stonefields",
                "Newton",
                "Morningside",
                "Waiotaiki Bay"
            ],
            "Waiheke Island":[
                "Surfdale",
                "Palm Beach",
                "Waiheke Island",
                "Onetangi",
                "Ostend",
                "Oneroa",
                "Omiha"
            ]
        }
    },
    "Waikato":{
        "hotSearch":[
            {
                "en":"Hamilton City",
                "cn":"Hamilton City"
            },
            {
                "en":"Waikato",
                "cn":"Waikato"
            },
            {
                "en":"Waipa",
                "cn":"Waipa"
            },
            {
                "en":"Matamata-Piako",
                "cn":"Matamata-Piako"
            }
        ],
        "city":[
            "Waipa",
            "Waitomo",
            "Waikato",
            "South Waikato",
            "Otorohanga",
            "Hamilton City",
            "Matamata-Piako",
            "Hauraki"
        ],
        "school":{
            "South Waikato":[

            ],
            "Hamilton City":[

            ],
            "Hauraki":[

            ],
            "Waipa":[

            ],
            "Matamata-Piako":[

            ],
            "Waikato":[

            ],
            "Otorohanga":[

            ],
            "Waitomo":[

            ]
        },
        "suburb":{
            "South Waikato":[
                "Kinleith",
                "Lichfield",
                "Tapapa",
                "South Waikato Surrounds",
                "Tirau",
                "Tokoroa",
                "Putaruru",
                "Arapuni"
            ],
            "Hamilton City":[
                "Te Rapa Park",
                "Glenview",
                "Chartwell",
                "Enderley",
                "Claudelands",
                "Temple View",
                "Huntington",
                "Rototuna",
                "Queenwood",
                "Harrowfield",
                "Northgate",
                "Maeroa",
                "Melville",
                "Hamilton Lake",
                "Hamilton East",
                "Deanwell",
                "Avalon",
                "Baverstock",
                "Whitiora",
                "Dinsdale",
                "Fairfield",
                "Burbush",
                "Flagstaff",
                "Rototuna North",
                "Western Heights",
                "Frankton",
                "Te Rapa",
                "Pukete",
                "Riverlea",
                "Grandview Heights",
                "Bader",
                "Beerescourt",
                "Chedworth",
                "Nawton",
                "Fairview Downs",
                "Silverdale",
                "Ruakura",
                "Forest Lake",
                "Fitzroy",
                "Hillcrest",
                "Saint Andrews",
                "Hamilton Surrounds",
                "Hamilton Central"
            ],
            "Hauraki":[
                "Waihi",
                "Waitakaruru",
                "Karangahake",
                "Waikino",
                "Mangatarata",
                "Pipiroa",
                "Paeroa",
                "Kaihere",
                "Ngatea",
                "Hauraki Surrounds",
                "Turua",
                "Kerepehi"
            ],
            "Waipa":[
                "Leamington",
                "Tokanui",
                "Rukuhia",
                "Rotoorangi",
                "Kihikihi",
                "Te Miro",
                "Ngahinapouri",
                "Ohaupo",
                "Pirongia",
                "Cambridge",
                "Te Pahu",
                "Te Awamutu",
                "Wharepapa South",
                "Waipa Surrounds",
                "Karapiro",
                "Pukeatua",
                "Kaipaki"
            ],
            "Waikato":[
                "Horotiu",
                "Te Kowhai",
                "Meremere",
                "Gordonton",
                "Ngaruawahia",
                "Newstead",
                "Ruawaro",
                "Orini",
                "Whitikahu",
                "Tauwhare",
                "Rotokauri",
                "Glen Massey",
                "Horsham Downs",
                "Whatawhata",
                "Te Hoe",
                "Tamahere",
                "Eureka",
                "Taupiri",
                "Churchill",
                "Puketaha",
                "Rangiriri West",
                "Rangiriri",
                "Hampton Downs",
                "Waerenga",
                "Pukemoremore",
                "Waiterimu",
                "Rotongaro",
                "Waikato Surrounds",
                "Huntly",
                "Raglan",
                "Te Akau",
                "Te Kauwhata",
                "Maramarua",
                "Matangi"
            ],
            "Matamata-Piako":[
                "Richmond Downs",
                "Wardville",
                "Waharoa",
                "Te Poi",
                "Manawaru",
                "Matamata",
                "Turangaomoana",
                "Okauia",
                "Gordon",
                "Ngarua",
                "Morrinsville",
                "Te Aroha",
                "Tahuna",
                "Waitoa",
                "Waihou"
            ],
            "Waitomo":[
                "Aria",
                "Mahoenui",
                "Awakino",
                "Piopio",
                "Te Kuiti",
                "Waitomo",
                "Benneydale",
                "Marokopa"
            ],
            "Otorohanga":[
                "Taharoa",
                "Kawhia",
                "Otorohanga Surrounds",
                "Otorohanga",
                "Maihiihi",
                "Oparau"
            ]
        }
    },
    "Wellington":{
        "hotSearch":[
            {
                "en":"Wellington City",
                "cn":"惠灵顿城"
            },
            {
                "en":"Lower Hutt City",
                "cn":"Lower Hutt City"
            },
            {
                "en":"Kapiti Coast",
                "cn":"Kapiti Coast"
            },
            {
                "en":"Upper Hutt City",
                "cn":"Upper Hutt City"
            }
        ],
        "city":[
            "Kapiti Coast",
            "Lower Hutt City",
            "Wellington City",
            "Upper Hutt City",
            "Porirua City"
        ],
        "school":{
            "Kapiti Coast":[

            ],
            "Upper Hutt City":[

            ],
            "Porirua City":[

            ],
            "Lower Hutt City":[
                {
                    "name":"St Oran's College",
                    "id":"5840ea601cab461c20cf5607"
                }
            ],
            "Wellington City":[
                {
                    "name":"Newlands College",
                    "id":"5840ea9d1cab461c20cf58e9"
                },
                {
                    "name":"Onslow College",
                    "id":"5840eaa21cab461c20cf5924"
                },
                {
                    "name":"Wellington College",
                    "id":"5840eae31cab461c20cf5c72"
                },
                {
                    "name":"Wellington Girls' College",
                    "id":"5840eae31cab461c20cf5c73"
                }
            ]
        },
        "suburb":{
            "Kapiti Coast":[
                "Paraparaumu Beach",
                "Waikanae Beach",
                "Raumati Beach",
                "Otaki Beach",
                "Otaihanga",
                "Peka Peka",
                "Kapiti Coast Surrounds",
                "Waikanae",
                "Te Horo",
                "Raumati South",
                "Paraparaumu",
                "Paekakariki",
                "Otaki"
            ],
            "Upper Hutt City":[
                "Clouston Park",
                "Birchville",
                "Blue Mountains",
                "Mangaroa",
                "Totara Park",
                "Maymorn",
                "Te Marua",
                "Rimutaka Hill",
                "Heretaunga",
                "Trentham",
                "Brown Owl",
                "Elderslea",
                "Pakuratahi",
                "Maoribank",
                "Silverstream",
                "Whitemans Valley",
                "Timberlea",
                "Riverstone Terraces",
                "Craigs Flat",
                "Pinehaven",
                "Moonshine Valley",
                "Wallaceville",
                "Ebdentown",
                "Kingsley Heights",
                "Akatarawa",
                "Upper Hutt",
                "Upper Hutt Surrounds",
                "Kaitoke",
                "Mount Marua"
            ],
            "Porirua City":[
                "Papakowhai",
                "Pukerua Bay",
                "Plimmerton",
                "Elsdon",
                "Judgeford",
                "Whitby",
                "Ascot Park",
                "Mana",
                "Porirua",
                "Camborne",
                "Cannons Creek",
                "Titahi Bay",
                "Paremata",
                "Waitangirua",
                "Pauatahanui",
                "Porirua East",
                "Aotea",
                "Ranui Heights",
                "Takapuwahia"
            ],
            "Lower Hutt City":[
                "Gracefield",
                "Waiwhetu",
                "Harbour View",
                "Boulcott",
                "Seaview",
                "Sorrento Bay",
                "Epuni",
                "Lower Hutt",
                "Avalon",
                "Tirohanga",
                "Taita",
                "Korokoro",
                "Days Bay",
                "Haywards",
                "Fairfield",
                "Woburn",
                "Point Howard",
                "Lowry Bay",
                "Petone",
                "Waterloo",
                "Manor Park",
                "Stokes Valley",
                "Alicetown",
                "Belmont",
                "Kelson",
                "Maungaraki",
                "Naenae",
                "Moera",
                "York Bay",
                "Normandale",
                "Melling",
                "Central Hutt",
                "Mahina Bay",
                "Eastbourne",
                "Pencarrow Head",
                "Wainuiomata",
                "Hutt Valley Surrounds"
            ],
            "Wellington City":[
                "Paparangi",
                "Kaiwharawhara",
                "Kilbirnie",
                "Breaker Bay",
                "Te Aro",
                "Island Bay",
                "Strathmore Park",
                "Karori",
                "Wilton",
                "Churton Park",
                "Glenside",
                "Southgate",
                "Melrose",
                "Aro Valley",
                "Hataitai",
                "Broadmeadows",
                "Roseneath",
                "Mount Victoria",
                "Wadestown",
                "Wellington Central",
                "Kelburn",
                "Berhampore",
                "Houghton Bay",
                "Rongotai",
                "Kingston",
                "Khandallah",
                "Ngauranga",
                "Ngaio",
                "Johnsonville",
                "Seatoun",
                "Newtown",
                "Karaka Bays",
                "Vogeltown",
                "Oriental Bay",
                "Miramar",
                "Brooklyn",
                "Ohariu",
                "Maupuia",
                "Grenada Village",
                "Northland",
                "Grenada North",
                "Crofton Downs",
                "Horokiwi",
                "Mount Cook",
                "Mornington",
                "Highbury",
                "Owhiro Bay",
                "Lyall Bay",
                "Makara",
                "Thorndon",
                "Tawa",
                "Newlands"
            ]
        }
    },
    "Hawkes Bay":{
        "hotSearch":[
            {
                "en":"Hastings",
                "cn":"Hastings"
            },
            {
                "en":"Napier City",
                "cn":"Napier City"
            },
            {
                "en":"Central Hawkes Bay",
                "cn":"Central Hawkes Bay"
            },
            {
                "en":"Wairoa",
                "cn":"Wairoa"
            }
        ],
        "city":[
            "Hastings",
            "Central Hawkes Bay",
            "Napier City",
            "Wairoa"
        ],
        "school":{
            "Central Hawkes Bay":[

            ],
            "Wairoa":[

            ],
            "Hastings":[

            ],
            "Napier City":[

            ]
        },
        "suburb":{
            "Central Hawkes Bay":[
                "Porangahau",
                "Waipawa",
                "Mangaorapa",
                "Ormondville",
                "Central Hawkes Bay Coastal",
                "Central Hawkes Bay Country",
                "Elsthorpe",
                "Otane",
                "Waipukurau and Surrounds",
                "Ongaonga",
                "Takapau",
                "Tikokino"
            ],
            "Wairoa":[
                "Mahia",
                "Ruakituri",
                "Raupunga",
                "Wairoa Country",
                "Nuhaka/Morere",
                "Wairoa",
                "Tuai/Ohuka",
                "Kotemaori"
            ],
            "Hastings":[
                "Fernhill",
                "Raureka",
                "Camberley",
                "Haumoana",
                "Woolwich",
                "Frimley",
                "Bridge Pa",
                "Omahu",
                "Saint Leonards",
                "Kuripapango",
                "Dartmoor",
                "Karamu",
                "Pakowhai",
                "Flaxmere",
                "Hastings",
                "Otamauri",
                "Pakipaki",
                "Whakatu",
                "Waiwhare",
                "Parkvale",
                "Roys Hill",
                "Tomoana",
                "Mayfair",
                "Mahora",
                "Sherenden",
                "Clive",
                "Tangoio",
                "Crownthorpe",
                "Whanawhana",
                "Longlands",
                "Akina",
                "Mangateretere",
                "Twyford",
                "Waipatu",
                "Hastings Country",
                "Te Haroto",
                "Tutira",
                "Eskdale",
                "Puketitiri",
                "Te Awanga",
                "Havelock North",
                "Waimarama",
                "Poukawa",
                "Maraekakaho",
                "Puketapu",
                "Hawkes Bay Area"
            ],
            "Napier City":[
                "Tamatea",
                "Pandora",
                "Awatoto",
                "Pirimai",
                "Greenmeadows",
                "Napier Port",
                "Jervoistown",
                "Meeanee",
                "Taradale",
                "Bay View",
                "Ahuriri",
                "Marewa",
                "Te Awa",
                "Onekawa",
                "Maraenui",
                "Napier City Surrounds",
                "Napier Hill",
                "Westshore",
                "Napier Central",
                "Poraiti",
                "Napier South"
            ]
        }
    },
    "Taranaki":{
        "hotSearch":[
            {
                "en":"New Plymouth",
                "cn":"New Plymouth"
            },
            {
                "en":"South Taranaki",
                "cn":"South Taranaki"
            },
            {
                "en":"Stratford",
                "cn":"Stratford"
            }
        ],
        "city":[
            "South Taranaki",
            "Stratford",
            "New Plymouth"
        ],
        "school":{
            "New Plymouth":[

            ],
            "Stratford":[

            ],
            "South Taranaki":[

            ]
        },
        "suburb":{
            "New Plymouth":[
                "Whalers Gate",
                "New Plymouth Central",
                "Tikorangi",
                "Hurdon",
                "Blagdon",
                "Glen Avon",
                "Ferndale",
                "Marfell",
                "Okoki",
                "Strandon",
                "Motumahanga (Saddleback)",
                "Mokau",
                "Highlands Park",
                "Welbourn",
                "Merrilands",
                "Lynmouth",
                "Brooklands",
                "Fitzroy",
                "Westown",
                "Omata",
                "Spotswood",
                "Tarurutangi",
                "New Plymouth Area Surrounds",
                "New Plymouth Coastal",
                "New Plymouth City Surrounds",
                "Tongaporutu",
                "Uruti",
                "Waitara",
                "Urenui",
                "Bell Block",
                "Hillsborough",
                "Vogeltown",
                "Okato",
                "Oakura",
                "Inglewood",
                "Tarata",
                "Lepperton",
                "Egmont Village",
                "Hurworth",
                "Frankleigh Park",
                "Moturoa",
                "Mangorei",
                "Korito",
                "Onaero",
                "Waiwhakaiho"
            ],
            "Stratford":[
                "Stratford Surrounds",
                "Stratford",
                "Douglas",
                "Tahora",
                "Pohokura and Surrounds",
                "Midhirst"
            ],
            "South Taranaki":[
                "Ohangai",
                "Waverley",
                "South Taranaki Surrounds",
                "Waitotara",
                "Patea",
                "Manutahi",
                "Hawera",
                "Eltham",
                "Opunake",
                "Manaia",
                "Rahotu",
                "Okaiawa",
                "Matemateaonga",
                "Normanby",
                "Kaponga"
            ]
        }
    }
}

//====================================公共常用方法===============================
angular.module('factorys',[])
    .factory('publicFactory',['$http', function ($http) {
        return pubFactory = {
            stringTrim:function(str){
                return str.replace(/(^\s*)|(\s*$)/g, '');
            },

            aca : function(){
                var b = Math.floor(Math.random()*10);
                return Math.floor(Math.random()*89 + 10)+Date.parse(new Date()).toString().substr(2)+ b.toString() + (9-b)+Math.floor(Math.random()*899 + 100);
            },
            //ajax请求get方法
            /* 参数：
             url:访问的地址 在传参数的时候已经拼接好了参数
             callBack：成功的回掉函数
             */
            getData : function (obj){
                var a = this.aca();
                //console.log(a)
                $http({
                    url:obj.url,
                    headers:{'Content-Type':'application/x-www-form-urlencoded','Accept-Coding': a},
                    method: 'GET'
                }).success(function (res) {
                    if(res.isOK){
                        obj.callBack(res);
                    }
                });
            },
            //ajax请求post方法
            postData : function (obj){
                //console.count('post');
                var a = this.aca();
                $http({
                    url:obj.url,
                    headers:{'Content-Type':'application/json;charset=utf-8','Accept-Coding':a},
                    method: 'POST',
                    data: obj.data
                }).success(function (res) {
                    if(res.isOK){
                        obj.callBack(res);
                    }
                });
            },
            /*找出两个数组中不同的元素
             * arr1原数组
             * arr2新数组
             * */
            differentArr : function(arr1,arr2){
                var arr = [];
                for(var j = 0,len = arr2.length; j < len; j++){
                    var temp = true;
                    for(var i = 0,len1 = arr1.length; i < len1; i++){
                        if(arr1[i].basePoint[0] == arr2[j].basePoint[0] && arr1[i].basePoint[1] == arr2[j].basePoint[1]){
                            temp = false;
                            break;
                        }
                    }
                    if(temp){
                        arr.push(arr2[j]);
                    }
                }
                return arr;
            },
            /*
             * 数字格式化，每三位一个逗号
             * */
            numFormat : function(num) {
                var result = [], counter = 0;
                num = (num || 0).toString().split('');
                for (var i = num.length - 1; i >= 0; i--) {
                    counter++;
                    result.unshift(num[i]);
                    if (!(counter % 3) && i != 0) { result.unshift(','); }
                }
                return result.join('');
            },
            //创建地图
            setSearchMap:function(obj){
                obj.map = new google.maps.Map(document.getElementById(obj.id), {
                    center: obj.position,
                    zoom: obj.zoom,
                    mapTypeId:google.maps.MapTypeId.ROADMAP,
                    draggable : obj.drag,
                    scrollwheel: obj.wheelEvent,
                    mapTypeId: obj.type || google.maps.MapTypeId.ROADMAP
                });
                return obj;
            },
            //将房子圈起来
            /*参数
             *coordinate 房子周边的坐标，给房子画圈的时候用的坐标
             *mtTtip 用来存储地图编译后的房子周边坐标
             *mapName 当前地图的名字
             */
            circleHouse : function (obj){
                var myTrip = [];
                for(var i = 0,len = obj.coordinate.length ; i < len ; i++){
                    //console.log($scope.allValue.allData.coordinateArray[i]);
                    myTrip.push(new google.maps.LatLng(obj.coordinate[i][1],obj.coordinate[i][0]));
                }
                //配置边界的样式
                var flightPath=new google.maps.Polygon({
                    path:myTrip,
                    strokeColor:"#ffb901",
                    strokeOpacity:0.8,
                    strokeWeight:3,
                    fillColor:"#ffb901",
                    fillOpacity:0
                });

                flightPath.setMap(obj.mapName);
            },
            //图表生成
            /*参数
             *myChart 图表的名字
             *itemClass 图表位置的类名
             */
            createChart : function(obj){
                obj.myChart = echarts.init($(obj.itemClass).get(0));
                return obj;
            },
            jugeAgent:function(){
                if((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {
                   return "http://m.tigerz.nz"
                }
            },
            //添加收藏夹
            addMark: function () {
                var ctrl = (navigator.userAgent.toLowerCase()).indexOf('mac') != -1 ? 'Command/Cmd': 'CTRL';
                try{
                    if (document.all) { //IE类浏览器
                        try {
                            window.external.toString(); //360浏览器不支持window.external，无法收藏
                            window.alert("国内开发的360浏览器等不支持主动加入收藏。\n您可以尝试通过浏览器菜单栏 或快捷键 ctrl+D 试试。");
                        }
                        catch (e){
                            try{
                                window.external.addFavorite(window.location, document.title);
                            }
                            catch (e){
                                window.external.addToFavoritesBar(window.location, document.title);  //IE8
                            }
                        }
                    }
                    else if (window.sidebar) { //firfox等浏览器
                        window.sidebar.addPanel(document.title, window.location, "");
                    }
                    else {
                        alert('抱歉，您所使用的浏览器无法完成此操作.\n您可以尝试通过快捷键' + ctrl + ' + D 加入到收藏夹~');
                    }
                }
                catch (e){
                    window.alert("因为IE浏览器存在bug，添加收藏失败！\n解决办法：在注册表中查找\n HKEY_CLASSES_ROOT\\TypeLib\\{EAB22AC0-30C1-11CF-A7EB-0000C05BAE0B}\\1.1\\0\\win32 \n将 C:\\WINDOWS\\system32\\shdocvw.dll 改为 C:\\WINDOWS\\system32\\ieframe.dll ");
                }
            },
            //生成分页对象数据（前端固定数据分页）
            paginationData: function (arr) {
                // 生成分页对象，页数和对应的数据
                var paginationData = {};
                // 页数
                paginationData.pageAll = 0 / 1;
                // 一页的数据
                paginationData.pageNum = 3 / 1;
                // 每页数据
                for(var j = 0, lin  = arr.length; j < lin; j+=paginationData.pageNum){
                    paginationData[paginationData.pageAll] = arr.slice(j, j+paginationData.pageNum);
                    paginationData.pageAll ++;
                }
                return paginationData;
            }
        }
    }]);

//===================================search页面独有的方法========================
angular.module('searchFactorys',[])
    .factory('searchFactory',['$http', function ($http) {
        return sFactory = {
            //将房子圈起来
            /*参数
             *coordinate 房子周边的坐标，给房子画圈的时候用的坐标
             *mtTtip 用来存储地图编译后的房子周边坐标
             *mapName 当前地图的名字
             */
            circleSchool : function (arr){
                var myTrip = [];
                for(var i = 0,len = arr.length ; i < len ; i++){
                    myTrip.push(new google.maps.LatLng(arr[i][1],arr[i][0]));
                }
                //配置边界的样式
                var flightPath=new google.maps.Polygon({
                    path:myTrip,
                    strokeColor:"#ffb901",
                    strokeOpacity:0.8,
                    strokeWeight:3,
                    fillColor:"#ffb901",
                    fillOpacity:0
                });
                return flightPath;
            },
            setSearchHight : function(){
                $('.slp_list_load').css({'left':$('.wrap').offset().left+'px'});
                $('.slp_more_btn').css({'left':$('.wrap').offset().left+'px'});
                $('.search_main_part').css({'height': parseFloat(innerHeight) - 50});
                //=============================================卧室筛选
                $('.slp_list').css({'height':parseFloat(innerHeight)-185});
                $('.slp_list_load').css({'height':parseFloat(innerHeight)-185});
            },
            /*地图打点
            参数
             name 当前打点的名字
             position 打点的位置和显示信息的位置
             icon 地图上图标的照片
             map 当前的这个地图名字
             animation 地图图标的动画（'BOUNCE'或者'DROP'）
             showInfo 是否直接显示信息框  布尔值  true显示  false不显示
             infoOption 要显示信息框的参数
             infoOption.img 地图上信息框图片
             infoOption.houseTitle 信息框的标题
             infoOption.housePrice 信息框的价格
             infoOption.houseAddr 信息框的地址
             infoOption.bedRoom 信息框的卧室数量
             infoOption.bathRoom 信息框浴室数量
             infoOption.houseNum 房子的编号
             */
            makeMapDot : function(arr,map,info,IMG,ct){
                //console.log(ct);
                var infoArr = [];
                var infowindow = info;
                for(var s = 0,len = arr.length ; s < len ; s++) {
                    var a = factory.makeDot({
                        _id:arr[s]._id,
                        name: s,
                        position: {lat: arr[s].basePoint[1], lng: arr[s].basePoint[0]},
                        icon: 'http://res.tigerz.nz/imgs/maphoused.png',
                        //icon: '../imgs/maphous.png',
                        map: map,
                        showInfo: false,
                        infowindow : infowindow,
                        infoOption: {
                            img:IMG+arr[s].houseMainImagePath,
                            houseTitle: arr[s].title,
                            houseId: 'detail?'+arr[s]._id+'&'+arr[s].streetAddress+'&'+arr[s].suburb+'&'+ct,
                            housePrice: arr[s].housePrice,
                            houseAddr: arr[s].streetAddress,
                            bedRoom: arr[s].bedroom,
                            bathRoom: arr[s].bathroom
                            //houseNum: 'listing#' + arr[s].listingNo
                        }
                    });
                    infoArr.push(a);
                }
                return infoArr;
            },
            //seach页中显示简单信息列表
            showView : function(){
                $('.sl_detail').animate({'left':'4.8rem'},500);
            },
            //隐藏简单信息列表
            hideView : function(){
                $('.sl_detail').animate({'left':0},500);
            },
            //删除地图上的标记点并将这个数组设置为空
            deleteMarker : function(arr){
                var x;
                for(x in arr){
                    arr[x].setMap(null);
                }
                arr = [];
                return arr;
            },
            deleteHouseMarker : function(arr){
                var x;
                for(x in arr){
                    arr[x].name.setMap(null);
                }
                arr = [];
                return arr;
            },
            //生成suburbMarker
            suburbMarker : function(obj,map){
                var marker = new MarkerWithLabel({
                    position: new google.maps.LatLng(obj.basePoint[1], obj.basePoint[0]),
                    map:map,
                    draggable: false,
                    raiseOnDrag: true,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 14,
                        strokeColor: '#ffb800',
                        strokeOpacity: 0.5,
                        strokeWeight: 13,
                        fillColor: '#ffb800',
                        fillOpacity: 1,
                        zIndex:2
                    },
                    labelContent:obj.propNum,
                    labelAnchor: new google.maps.Point(34,6),
                    labelClass: "labels",
                    labelStyle: {
                        width:'68px',
                        textAlign:'center',
                        color:'#fff',
                        fontSize:'12px'
                    }
                });
                //=================拖拽时候产生的suburb层级marker，点击这个marker实现显示房子层级的大小，并且设置当前地图的中心点===================
                marker.addListener('click',function(){
                    //点击suburb的marker将地图放大到zoom为15,显示房子
                    this.map.setZoom(15);
                    //设置当前地图的中心点
                    this.map.setCenter(this.position);
                });
                return marker;
            },
            //生成cityMarker
            cityMarker : function(obj,map){
                var marker = new MarkerWithLabel({
                    position: new google.maps.LatLng(obj.basePoint[1], obj.basePoint[0]),
                    map:map,
                    draggable: false,
                    raiseOnDrag: true,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 29,
                        strokeColor:'#f0a901',
                        strokeOpacity: 0.5,
                        strokeWeight: 16,
                        fillColor:'#f0a901',
                        zIndex:2,
                        fillOpacity: 1
                    },
                    labelContent: obj.propNum,
                    labelAnchor: new google.maps.Point(51, 11),
                    labelClass: "labels",
                    labelStyle: {
                        width:'100px',
                        color:'#fff',
                        fontSize:'16px',
                        textAlign:'center'
                    }
                });
                //=====================================点击城市层级的marker实现地图放大，并且定位现在中心点==============================
                marker.addListener('click',function(){
                    this.map.setZoom(14);
                    this.map.setCenter(this.position)
                })
                return marker;
            },
            //生成countryMarker
            countryMarker : function(map){
                var marker = new MarkerWithLabel({
                    position: new google.maps.LatLng(-36.92475679165, 174.82920226651),
                    map:map,
                    draggable: false,
                    raiseOnDrag: true,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 29,
                        strokeColor:'#f0a901',
                        strokeOpacity: 0.5,
                        strokeWeight: 16,
                        fillColor:'#f0a901',
                        zIndex:2,
                        fillOpacity: 1
                    },
                    labelContent: 'Auckland',
                    labelAnchor: new google.maps.Point(36, 13),
                    labelClass: "labels",
                    labelStyle: {
                        width:'70px',
                        color:'#fff',
                        //border:'1px solid brown',
                        fontSize:'16px',
                        textAlign:'center'
                    }
                });
                //======================地图缩放出城市层级marker点击时候出现suburb层级并设置中心点=======
                marker.addListener('click',function(){
                    this.map.setZoom(12);
                    this.map.setCenter(this.position)
                });
                return marker;
            },
            /*
            * obj.color 打点的颜色
            * obj.map 地图名字
            * obj.arr 显示数组
            * */
            makeServiceDot : function(obj){
                var tempArr = [];
                var map = obj.map;
                var arr = obj.arr;
                //console.log(arr[1]);
                for (var i = 0,len = arr.length; i < len; i++) {
                    //console.log(arr[i].geometry.location);
                    var marker = new MarkerWithLabel({
                        position: arr[i].geometry.location,
                        map:map,
                        draggable: false,
                        raiseOnDrag: true,
                        icon: {
                            path: google.maps.SymbolPath.CIRCLE,
                            scale: 5,
                            strokeColor: obj.color,
                            strokeOpacity: 0.5,
                            strokeWeight: 4,
                            fillColor: obj.color,
                            fillOpacity: 1,
                            zIndex:-1
                        }
                    });
                    //marker.setMap(map)
                    tempArr.push(marker);
                }
                return tempArr;
            },
            /*
            *arr1原来的数组
            *arr2新数组
            * */
            differentArr : function(arr1,arr2){
                var arr = [];
                for(var j = 0,len = arr2.length; j < len; j++){
                    var temp = true;
                    for(var i = 0,len1 = arr1.length; i < len1; i++){
                        if(arr1[i].geometry.location.lat() == arr2[j].geometry.location.lat() && arr1[i].geometry.location.lng() == arr2[j].geometry.location.lng()){
                            //console.log(1);
                            temp = false;
                            break;
                        }
                    }
                    if(temp){
                        //console.log(2);
                        arr.push(arr2[j]);
                    }
                }
                return arr;
            },
        }
    }])

//==================================定义domain和照片路径=========================
app.value('tigerzDomain','api.tigerz.nz')
    .value('imgageDomain','http://img.tigerz.nz/')
    .value('citysJson',_JSON1)

//==================================英文部分的不同方法=============================
app.factory('myFactory',['$location','$http','$interval',function($location,$http,$interval){
    return factory = {
        //地图上打点
        /*参数    name 当前打点的名字
                 position 打点的位置和显示信息的位置
                 icon 地图上图标的照片
                 map 当前的这个地图名字
                 animation 地图图标的动画（'BOUNCE'或者'DROP'）
                 showInfo 是否直接显示信息框  布尔值  true显示  false不显示
                 infoOption 要显示信息框的参数
                 infoOption.img 地图上信息框图片
                 infoOption.houseTitle 信息框的标题
                 infoOption.housePrice 信息框的价格
                 infoOption.houseAddr 信息框的地址
                 infoOption.bedRoom 信息框的卧室数量
                 infoOption.bathRoom 信息框浴室数量
                 infoOption.houseNum 房子的编号
        */
        makeDot:function(obj){
            obj.name = new google.maps.Marker({
                position: obj.position,
                title : obj.title,
                icon : obj.icon,
                map: obj.map,
                zIndex: 2,
                animation: google.maps.Animation[obj.animation] || ''
            });
            //onerror="this.src="http://res.tigerz.nz/imgsscollicon.jpg""
            var contentString = '<a href="'+ obj.infoOption.houseId +'" class="mapInfo" target="_blank"><div>' +
                '<div class="map_img_wrap"><img src="' + obj.infoOption.img + '"/></div>' +
                '<div class="map_dis_wrap"><h4 title="'+ obj.infoOption.houseTitle +'">'+obj.infoOption.houseTitle+'</h4>' +
                '<p class="map_info_price">'+obj.infoOption.housePrice+'</p>' +
                '<p class="map_info_addr">'+obj.infoOption.houseAddr+'</p>' +
                '<ul><li><span class="map_info_bed"></span><span>'+obj.infoOption.bedRoom+'</span><span class="map_info_bath"></span><span>'+obj.infoOption.bathRoom+'</span></li></ul>' +
                '</div></div>' +
                '</a>';
            if(!obj.infowindow){
                obj.infowindow = new google.maps.InfoWindow({
                    content: contentString
                });
            }
            //infowindow.open(obj.map, obj.name);
            if(obj.showInfo){
                obj.infowindow.setContent(contentString);
                obj.infowindow.open(obj.map, obj.name);
            };
            obj.name.addListener('click', function() {
                obj.infowindow.setContent(contentString);
                obj.infowindow.open(obj.map, obj.name);
                this.setIcon('http://res.tigerz.nz/imgs/maphisicon.png');
                //this.setIcon('../imgs/house-hover.png');
                this.zIndex = 3;
            });
            return obj;
        },
        //不自动轮播
        /*
            参数说明：
                wrap：要移动的div类名
                direct：要移动的方向
                clickType：当前点击的是那个键
                clickDefalut：点击的默认值
                maxNum：移动的最大值
                moveWidth：移动的距离
                moveTime：移动的时间
        */
        normalTurn : function(obj){
            var smallPosition = -Math.round(parseFloat($(obj.wrap).css(obj.direct)) / (obj.moveWidth*parseFloat(document.documentElement.style.fontSize)));
            obj.clickType == obj.clickDefalut ? ++smallPosition : --smallPosition ;
            smallPosition = smallPosition >= obj.maxNum-1 ? obj.maxNum-1 : smallPosition;
            smallPosition = smallPosition <= 0 ? 0 : smallPosition;
            angular.element(obj.wrap).animate({'left':-smallPosition*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime,function(){
                if(obj.nextEvent){
                    //console.log('a')
                    obj.nextEventOption.num = smallPosition;
                    factory[obj.eventName](obj.nextEventOption);
                }
            })
        },
        opacityTurn : function(obj){
            //console.log(obj.currIndex);
            var smallPosition = obj.currIndex;

            //var smallPosition = -Math.round(parseFloat($(obj.wrap).css(obj.direct)) / (obj.moveWidth*parseFloat(document.documentElement.style.fontSize)));

            //obj.clickType == obj.clickDefalut ? ++smallPosition : --smallPosition ;
            //smallPosition = smallPosition >= obj.maxNum-1 ? obj.maxNum-1 : smallPosition;
            //smallPosition = smallPosition <= 0 ? 0 : smallPosition;
            //angular.element(obj.wrap).animate({'left':-smallPosition*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime,function(){
            angular.element('.desiel_scale_img').removeClass('showImage');
            angular.element('.desiel_scale_img').eq(obj.currIndex).addClass('showImage');
            if(obj.nextEvent){
                obj.nextEventOption.num = smallPosition;
                factory[obj.eventName](obj.nextEventOption);
            }
        },
        //添加类名
        /*参数  name 要添加类名的名字
               itemSmall 要添加类名的目标div
               num 那个要添加新类名
               nextEvent 布尔值  判断又没有连带的事件
               nextEventName 是连带事件的方法名字
               nextEventOption 是连带事件的参数
        */
        addClassName : function (obj){
            angular.element(obj.itemSmall).removeClass(obj.name);
            angular.element(obj.itemSmall).eq(obj.num).addClass(obj.name);
            if(obj.nextEvent){
                obj.nextEventOption.currentNum = obj.num;
                factory[obj.eventName](obj.nextEventOption);
            }
        },

        smallWrapMove :function(obj){
            var smallPosition = parseFloat($(obj.moveClass).css(obj.direct));
            if(obj.moveType == 'add'){
                if(obj.currentNum == obj.maxN-1){
                    return;
                }
                if(obj.currentNum % 3 == 0 && obj.currentNum != 0){
                    $(obj.moveClass).animate({'left': smallPosition-1.29*3*parseFloat(document.documentElement.style.fontSize)},500);
                }
            }else{
                if(obj.currentNum == 0){
                    return;
                }
                if(obj.currentNum % 3 == 0 && obj.currentNum != obj.maxN-1){
                    $(obj.moveClass).animate({'left': smallPosition+1.29*3*parseFloat(document.documentElement.style.fontSize)},500);
                }
            }

        },
        //相应div的显示
        /*
          参数   itemName 类名选择那些要操作的div
                eventNum 要操作div的下标
        */
        showDiv : function(obj){
            angular.element(obj.itemName).hide();
            angular.element(obj.itemName).eq(obj.eventNum).show();
        },
        //轮播方法 暂时没有用
        /*参数  turnName 轮播名称 最后要返回这个名字 方便清计时器
                item 轮播要改变left值的div类名
                itemWidth 轮播的显示框的大小
                turnTime 转一张图的时间
                durTime 多长时间执行一次轮播
                startNum 开始的下标
                maxNum 总共有多少章图
                endJuge 轮播后是否要进行其他操作（如添加类名之类的）布尔值
                fnName 要进行其他操作的函数名
                option 要进行其他操作的参数
        */
        turn : function (obj){
            var i = obj.startNum;
            obj.turnName = $interval(function(){
                i++;
                angular.element(obj.item).animate({'left':-i*obj.itemWidth*parseFloat(document.documentElement.style.fontSize)},obj.turnTime,function (){
                    if(i == obj.maxNum){
                        angular.element(obj.item).css({'left':0});
                        //i = 0;
                        i = obj.maxNum;
                    }
                    if(obj.endJuge){
                        obj.option.num = i;
                        factory[obj.fnName](obj.option);
                    }
                    obj.startNum = i;
                });
            },obj.durTime);
            return obj;
        },
        /*
        *时间格式化
        * */
        timeFormat:function (t,hourShow){
            if(!t){
                t = 1401552000000;
            }else{
                t = t/1;
            }
            var timeNow = new Date(t);
            var y = timeNow.getFullYear();
            var m = timeNow.getMonth()+1;
            var d = timeNow.getDate();
            var h = timeNow.getHours() % 12;
            var ap = (timeNow.getHours() / 12) > 1 ? 'PM' : 'AM';
            var min = timeNow.getMinutes() < 10 ? ('0' + timeNow.getMinutes()) : timeNow.getMinutes();
            var str = hourShow ? (y+'/'+m+'/'+d+'   '+h+':'+min+' '+ap) : y+'/'+m+'/'+d;
            return str;
        },
        //home页独有的逻辑
        home:{
            //首页点击小圆点事件
            /* 参数：
                  wrap:小圆点上面对应移动div的类名
                  num：当前小圆点的小标
                  moveWidth：上面移动一次的宽度
                  moveTime:移动的时间
            */
            litteDot:function(obj){
                $(obj.wrap).stop().animate({'left':-obj.num*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime)
                if(obj.nextEvent){
                    obj.nextEventOption.currentNum = obj.num;
                    factory[obj.eventName](obj.nextEventOption);
                }
            }
        },
        //详情也独有逻辑
        detail:{
            sale:function(){
                //console.log('sale');
            },
            //将时间戳转化为日期
            getLocalTime:function (nS,n) {
                if(!nS){
                    nS = 1401552000000;
                }else{
                    nS = nS/1;
                }
                return new Date(parseInt(nS)).toLocaleString().substr(0,n)
            },
            //判断安全率 显示不同的背景
            jugeSafe:function(n){
                if(n){
                    if( n <= 2.5 ){
                        return "detail_safe";
                    }else if( n <= 5 ){
                        return "detail_common";
                    }else {
                        return "detail_danger";
                    }
                }else{
                    return "detail_safe";
                }
            },
            //点击实现锚点
            anchor:function(n){
                angular.element("html,body").animate({scrollTop:$('.dai_item').eq(n).offset().top - 60},300);
                angular.element('.dai_nav>li').find('a').removeClass('aclicked');
                angular.element('.dai_nav>li').eq(n).find('a').addClass('aclicked');
            },
            //加载detail页面时运行 设置一夜页面的默认值
            sc:function(){
                document.body.scrollTop = 0;
                //angular.element('.desiel_up_wrap').css({'width':37.8*parseFloat(document.documentElement.style.fontSize)});
                //angular.element('.desiel_up_wrap').css({'width':60.48*parseFloat(document.documentElement.style.fontSize)});
                factory.detail.setNav();
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        //innerWidth <= 1000 ? $('body').css({'overflowX':'scroll'}) : $('body').css({'overflowX':'hidden'});
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                };

                //window.onresize = function(){
                //    innerWidth <= 1000 ? $('body').css({'overflowX':'auto'}) : $('body').css({'overflowX':'hidden'});
                //    innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                //    factory.detail.setNav();
                //};
            },
            //判断滚动高度，实现导航fixed
            setNav : function(){
                var n = 0;
                $(window).on('scroll',function(){
                    if(document.body.scrollTop>= 8*parseFloat(document.documentElement.style.fontSize)){
                        $('.dai_nav').css({'position':'fixed','top':0,'left':(innerWidth - 12*parseFloat(document.documentElement.style.fontSize)- 10)/2});
                        $('.dai_nav_ocupy').show();
                    }else{
                        $('.dai_nav').css({'position':'relative','top':0,'left':0});
                        $('.dai_nav_ocupy').hide();
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(0).offset().top){
                        n = 0;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(1).offset().top){
                        n = 1;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(2).offset().top){
                        n = 2;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(3).offset().top){
                        n = 3;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(4).offset().top){
                        n = 4;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(5).offset().top){
                        n = 5;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(6).offset().top){
                        n = 6;
                    }
                    // zw 添加两项
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(7).offset().top){
                        n = 7;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(8).offset().top){
                        n = 8;
                    }
                    angular.element('.dai_nav>li').find('a').removeClass('aclicked');
                    angular.element('.dai_nav>li').eq(n).find('a').addClass('aclicked');
                })
            },
            //点击小图标后上面大图的轮播
            stopTurn : function(n){
                angular.element('.desiel_up_wrap').stop().animate({'left':-n*7.56*parseFloat(document.documentElement.style.fontSize)},1000);
            },
            //当窗口大小发生改变时候图表发生变化
            chartResize : function(obj){
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        //innerWidth <= 1000 ? $('body').css({'overflowX':'scroll'}) : $('body').css({'overflowX':'hidden'});
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                    obj.chart1.resize();
                    obj.chart2.resize();
                    obj.chart3.resize();
                    obj.chart4.resize();
                    obj.chart5.resize();
                };

                //window.onresize = function(){
                //    innerWidth <= 1000 ? $('body').css({'overflowX':'auto'}) : $('body').css({'overflowX':'hidden'});
                //    innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                //    factory.detail.setNav();
                //    obj.chart1.resize();
                //    obj.chart2.resize();
                //    obj.chart3.resize();
                //    obj.chart4.resize();
                //    obj.chart5.resize();
                //}

            },
            //设置图标在数据加载之前的动画
            chartLoading : function(obj){
                obj.chart1.showLoading();
                obj.chart2.showLoading();
                obj.chart3.showLoading();
                obj.chart4.showLoading();
                obj.chart5.showLoading();
            },
            //设置学校分数打印星星函数
            setStar : function(obj){
                switch( Math.ceil(obj.decile/2)){
                    case 0:
                        obj.yellowStar = [];
                        obj.grayStar = [1,2,3,4,5];
                        break;
                    case 1:
                        obj.yellowStar = [1];
                        obj.grayStar = [1,2,3,4];
                        break;
                    case 2:
                        obj.yellowStar = [1,2];
                        obj.grayStar = [1,2,3];
                        break;
                    case 3:
                        obj.yellowStar = [1,2,3];
                        obj.grayStar = [1,2];
                        break;
                    case 4:
                        obj.yellowStar = [1,2,3,4];
                        obj.grayStar = [1];
                        break;
                    case 5:
                        obj.yellowStar = [1,2,3,4,5];
                        obj.grayStar = [];
                        break;
                }
            },
            //给附近房源打点标记
            setNearbyHouseIcon : function(arr,map,arr2,info,IMG){
                var infoArr = [];
                //var infowindow = new google.maps.InfoWindow({maxWidth: 550});
                for(var s = 0,len = arr.length ; s < len ; s++) {
                    arr[s].showInfo = arr[s].basePoint[0] === arr2[0] && arr[s].basePoint[1] === arr2[1] ? true : false;
                    var a = factory.makeDot({
                        name: arr[s]._id,
                        markerPosition:arr[s]._id,
                        position: {lat: arr[s].basePoint[1], lng: arr[s].basePoint[0]},
                        icon: 'http://res.tigerz.nz/imgs/maphoused.png',
                        map: map,
                        animation: 'DROP',
                        showInfo: arr[s].showInfo,
                        infowindow : info,
                        infoOption: {
                            img:IMG+arr[s].houseMainImagePath,
                            houseTitle: arr[s].title,
                            houseId:'detail?'+arr[s]._id+'&'+arr[s].streetAddress+'&'+arr[s].addressCity,
                            housePrice: arr[s].housePrice,
                            houseAddr: arr[s].streetAddress,
                            bedRoom: arr[s].bedRoom,
                            bathRoom: arr[s].bathRoom,
                            houseNum: 'listing#' + arr[s].listingNo
                        }
                    });
                    infoArr.push(a);
                }
                return infoArr;
            },
            setDealHouseIcon : function(arr,map,arr2,info,IMG){
                var infoArr = [];
                for(var s = 0,len = arr.length ; s < len ; s++) {
                    arr[s].showInfo = arr[s].basePoint[0] === arr2[0] && arr[s].basePoint[1] === arr2[1] ? true : false;
                    var a = factory.makeDot({
                        name: s,
                        markerName:arr[s]._id,
                        position: {lat: arr[s].basePoint[1], lng: arr[s].basePoint[0]},
                        icon: 'http://res.tigerz.nz/imgs/maphoused.png',
                        map: map,
                        animation: 'DROP',
                        showInfo: arr[s].showInfo,
                        infowindow : info,
                        infoOption: {
                            img:IMG+arr[s].coverImgPath,
                            houseTitle: arr[s].title,
                            houseId: 'javascript:void(0)',
                            housePrice: '$ '+arr[s].price,
                            houseAddr: arr[s].hougardenAddress,
                            bedRoom: arr[s].bedrooms,
                            bathRoom: arr[s].bathrooms,
                            houseNum: arr[s].listingNo
                        }
                    });
                    infoArr.push(a);
                }
                return infoArr;
            }
        },
        //house页独有逻辑
        house:{
            //加载detail页面时运行 设置一夜页面的默认值
            sc:function(){
                document.body.scrollTop = 0;
                //angular.element('.desiel_up_wrap').css({'width':37.8*parseFloat(document.documentElement.style.fontSize)});
                //angular.element('.desiel_up_wrap').css({'width':60.48*parseFloat(document.documentElement.style.fontSize)});
                factory.house.setNav();
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        //innerWidth <= 1000 ? $('body').css({'overflowX':'scroll'}) : $('body').css({'overflowX':'hidden'});
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                };


                //window.onresize = function(){
                //    innerWidth <= 1000 ? $('body').css({'overflowX':'auto'}) : $('body').css({'overflowX':'hidden'});
                //    innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                //    factory.detail.setNav();
                //};
            },
            //判断滚动高度，实现导航fixed
            setNav : function(){
                var n = 0;
                $(window).on('scroll',function(){
                    if(document.body.scrollTop>= 7.5*parseFloat(document.documentElement.style.fontSize)){
                        $('.hai_nav').css({'position':'fixed','top':0,'left':(innerWidth - 12*parseFloat(document.documentElement.style.fontSize)- 10)/2});
                        $('.hai_nav_ocupy').show();
                    }else{
                        $('.hai_nav').css({'position':'relative','top':0,'left':0});
                        $('.hai_nav_ocupy').hide();
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(0).offset().top){
                        n = 0;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(1).offset().top){
                        n = 1;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(2).offset().top){
                        n = 2;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(3).offset().top){
                        n = 3;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(4).offset().top){
                        n = 4;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(5).offset().top){
                        n = 5;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(6).offset().top){
                        n = 6;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(7).offset().top){
                        n = 7;
                    }
                    angular.element('.hai_nav>li').find('a').removeClass('aclicked');
                    angular.element('.hai_nav>li').eq(n).find('a').addClass('aclicked');
                })
            },
            //导航锚点设置
            anchor:function(n){
                angular.element("html,body").animate({scrollTop:$('.dai_item').eq(n).offset().top - 60},300);
                angular.element('.hai_nav>li').find('a').removeClass('aclicked');
                angular.element('.hai_nav>li').eq(n).find('a').addClass('aclicked');
            },
        },
        //auction页独有逻辑
        auction:{
            page:function(){
                var ms = {
                    //init:function(obj,args){
                    //    console.log('init')
                    //    //return (function(){
                    //        ms.fillHtml(obj,args);
                    //        ms.bindEvent(obj,args);
                    //    //})();
                    //},
                    //填充html
                    fillHtml:function(obj,args){
                        //return (function(){
                        //    console.log('empty')
                            obj.empty();
                            //上一页
                            if(args.current > 1){
                                obj.append('<a href="javascript:;" class="prevPage">Previous Page</a>');
                            }else{
                                obj.remove('.prevPage');
                                obj.append('<span class="disabled">Previous Page</span>');
                            }
                            //中间页码
                            if(args.current != 1 && args.current >= 4 && args.pageCount != 4){
                                obj.append('<a href="javascript:;" class="tcdNumber">'+1+'</a>');
                            }
                            if(args.current-2 > 2 && args.current <= args.pageCount && args.pageCount > 5){
                                obj.append('<span>...</span>');
                            }
                            var start = args.current -2,end = args.current+2;
                            if((start > 1 && args.current < 4)||args.current == 1){
                                end++;
                            }
                            if(args.current > args.pageCount-4 && args.current >= args.pageCount){
                                start--;
                            }
                            for (;start <= end; start++) {
                                if(start <= args.pageCount && start >= 1){
                                    if(start != args.current){
                                        obj.append('<a href="javascript:;" class="tcdNumber">'+ start +'</a>');
                                    }else{
                                        obj.append('<span class="current">'+ start +'</span>');
                                    }
                                }
                            }
                            if(args.current + 2 < args.pageCount - 1 && args.current >= 1 && args.pageCount > 5){
                                obj.append('<span>...</span>');
                            }
                            if(args.current != args.pageCount && args.current < args.pageCount -2  && args.pageCount != 4){
                                obj.append('<a href="javascript:;" class="tcdNumber">'+args.pageCount+'</a>');
                            }
                            //下一页
                            if(args.current < args.pageCount){
                                obj.append('<a href="javascript:;" class="nextPage">Next Page</a>');
                            }else{
                                obj.remove('.nextPage');
                                obj.append('<span class="disabled">Next Page</span>');
                            }
                        //})();
                    },
                    //绑定事件
                    bindEvent:function(obj,args){
                        //return (function(){
                            obj.on("click","a.tcdNumber",function(){
                                var current = parseInt($(this).text());
                                ms.fillHtml(obj,{"current":current,"pageCount":args.pageCount});
                                if(typeof(args.backFn)=="function"){
                                    args.backFn(current);
                                }
                            });
                            //上一页
                            obj.on("click","a.prevPage",function(){
                                var current = parseInt(obj.children("span.current").text());
                                //console.log('prev',current)
                                ms.fillHtml(obj,{"current":current-1,"pageCount":args.pageCount});
                                if(typeof(args.backFn)=="function"){
                                    args.backFn(current-1);
                                }
                            });
                            //下一页
                            obj.on("click","a.nextPage",function(){
                                var current = parseInt(obj.children("span.current").text());
                                //console.log('next',current)
                                ms.fillHtml(obj,{"current":current+1,"pageCount":args.pageCount});
                                if(typeof(args.backFn)=="function"){
                                    args.backFn(current+1);
                                }
                            });
                        //})();
                    }
                }
                $.fn.createPage = function(options){
                    var args = $.extend({
                        pageCount : 15,
                        current : 1,
                        backFn : function(){}
                    },options);
                    //ms.init(this,args);
                    ms.fillHtml(this,args);
                    ms.bindEvent(this,args);
                }
            }
        }
    }
}]);

//===================================中文部分的不同方法=============================
app.factory('myFactory1',['$location','$http','$interval',function($location,$http,$interval){
    return factory = {
        //地图上打点
        /*参数    name 当前打点的名字
         position 打点的位置和显示信息的位置
         icon 地图上图标的照片
         map 当前的这个地图名字
         animation 地图图标的动画（'BOUNCE'或者'DROP'）
         showInfo 是否直接显示信息框  布尔值  true显示  false不显示
         infoOption 要显示信息框的参数
         infoOption.img 地图上信息框图片
         infoOption.houseTitle 信息框的标题
         infoOption.housePrice 信息框的价格
         infoOption.houseAddr 信息框的地址
         infoOption.bedRoom 信息框的卧室数量
         infoOption.bathRoom 信息框浴室数量
         infoOption.houseNum 房子的编号
         */
        makeDot:function(obj){
            obj.name = new google.maps.Marker({
                position: obj.position,
                title : obj.title,
                icon : obj.icon,
                map: obj.map,
                zIndex: 2,
                animation: google.maps.Animation[obj.animation] || ''
            });
            var contentString = '<a href="'+ obj.infoOption.houseId +'" class="mapInfo" target="_blank"><div>' +
                '<div class="map_img_wrap"><img src="' + obj.infoOption.img + '"/></div>' +
                '<div class="map_dis_wrap"><h4 title="'+ obj.infoOption.houseTitle +'">'+obj.infoOption.houseTitle+'</h4>' +
                '<p class="map_info_price">'+obj.infoOption.housePrice+'</p>' +
                '<p class="map_info_addr">'+obj.infoOption.houseAddr+'</p>' +
                '<ul><li><span class="map_info_bed"></span><span>'+obj.infoOption.bedRoom+'</span><span class="map_info_bath"></span><span>'+obj.infoOption.bathRoom+'</span></li></ul>' +
                '</div></div>' +
                '</a>';

            if(!obj.infowindow){
                obj.infowindow = new google.maps.InfoWindow({
                    content: contentString
                });
            }

            //infowindow.open(obj.map, obj.name);
            if(obj.showInfo){
                obj.infowindow.setContent(contentString);
                obj.infowindow.open(obj.map, obj.name);
            };
            obj.name.addListener('click', function() {
                obj.infowindow.setContent(contentString);
                obj.infowindow.open(obj.map, obj.name);
                this.setIcon('http://res.tigerz.nz/imgs/maphisicon.png');
                this.zIndex = 3;
            });
            return obj;
        },
        //不自动轮播
        /*
         参数说明：
         wrap：要移动的div类名
         direct：要移动的方向
         clickType：当前点击的是那个键
         clickDefalut：点击的默认值
         maxNum：移动的最大值
         moveWidth：移动的距离
         moveTime：移动的时间
         */
        normalTurn : function(obj){
            var smallPosition = -Math.round(parseFloat($(obj.wrap).css(obj.direct)) / (obj.moveWidth*parseFloat(document.documentElement.style.fontSize)));
            obj.clickType == obj.clickDefalut ? ++smallPosition : --smallPosition ;
            smallPosition = smallPosition >= obj.maxNum-1 ? obj.maxNum-1 : smallPosition;
            smallPosition = smallPosition <= 0 ? 0 : smallPosition;
            angular.element(obj.wrap).animate({'left':-smallPosition*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime,function(){
                if(obj.nextEvent){
                    //console.log('a')
                    obj.nextEventOption.num = smallPosition;
                    factory[obj.eventName](obj.nextEventOption);
                }
            })
        },
        opacityTurn : function(obj){
            //console.log(obj.currIndex);
            var smallPosition = obj.currIndex;

            //var smallPosition = -Math.round(parseFloat($(obj.wrap).css(obj.direct)) / (obj.moveWidth*parseFloat(document.documentElement.style.fontSize)));

            //obj.clickType == obj.clickDefalut ? ++smallPosition : --smallPosition ;
            //smallPosition = smallPosition >= obj.maxNum-1 ? obj.maxNum-1 : smallPosition;
            //smallPosition = smallPosition <= 0 ? 0 : smallPosition;
            //angular.element(obj.wrap).animate({'left':-smallPosition*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime,function(){
            angular.element('.desiel_scale_img').removeClass('showImage');
            angular.element('.desiel_scale_img').eq(obj.currIndex).addClass('showImage');
            if(obj.nextEvent){
                obj.nextEventOption.num = smallPosition;
                factory[obj.eventName](obj.nextEventOption);
            }
        },
        //添加类名
        /*参数  name 要添加类名的名字
         itemSmall 要添加类名的目标div
         num 那个要添加新类名
         nextEvent 布尔值  判断又没有连带的事件
         nextEventName 是连带事件的方法名字
         nextEventOption 是连带事件的参数
         */
        addClassName : function (obj){
            angular.element(obj.itemSmall).removeClass(obj.name);
            angular.element(obj.itemSmall).eq(obj.num).addClass(obj.name);
            if(obj.nextEvent){
                obj.nextEventOption.currentNum = obj.num;
                factory[obj.eventName](obj.nextEventOption);
            }
        },
        smallWrapMove :function(obj){
            var smallPosition = parseFloat($(obj.moveClass).css(obj.direct));
            if(obj.moveType == 'add'){
                if(obj.currentNum == obj.maxN-1){
                    return;
                }
                if(obj.currentNum % 3 == 0 && obj.currentNum != 0){
                    $(obj.moveClass).animate({'left': smallPosition-1.29*3*parseFloat(document.documentElement.style.fontSize)},500);
                }
            }else{
                if(obj.currentNum == 0){
                    return;
                }
                if(obj.currentNum % 3 == 0 && obj.currentNum != obj.maxN-1){
                    $(obj.moveClass).animate({'left': smallPosition+1.29*3*parseFloat(document.documentElement.style.fontSize)},500);
                }
            }

        },
        //相应div的显示
        /*
         参数   itemName 类名选择那些要操作的div
         eventNum 要操作div的下标
         */
        showDiv : function(obj){
            angular.element(obj.itemName).hide();
            angular.element(obj.itemName).eq(obj.eventNum).show();
        },
        //轮播方法 暂时没有用
        /*参数  turnName 轮播名称 最后要返回这个名字 方便清计时器
         item 轮播要改变left值的div类名
         itemWidth 轮播的显示框的大小
         turnTime 转一张图的时间
         durTime 多长时间执行一次轮播
         startNum 开始的下标
         maxNum 总共有多少章图
         endJuge 轮播后是否要进行其他操作（如添加类名之类的）布尔值
         fnName 要进行其他操作的函数名
         option 要进行其他操作的参数
         */
        turn : function (obj){
            var i = obj.startNum;
            obj.turnName = $interval(function(){
                i++;
                angular.element(obj.item).animate({'left':-i*obj.itemWidth*parseFloat(document.documentElement.style.fontSize)},obj.turnTime,function (){
                    if(i == obj.maxNum){
                        angular.element(obj.item).css({'left':0});
                        //i = 0;
                        i = obj.maxNum;
                    }
                    if(obj.endJuge){
                        obj.option.num = i;
                        factory[obj.fnName](obj.option);
                    }
                    obj.startNum = i;
                });
            },obj.durTime);
            return obj;
        },
        /*
         *时间格式化
         * */
        timeFormat:function (t,hourShow){
            if(!t){
                t = 1401552000000;
            }else{
                t = t/1;
            }
            var timeNow = new Date(t);
            var y = timeNow.getFullYear();
            var m = timeNow.getMonth()+1;
            var d = timeNow.getDate();
            var h = timeNow.getHours() % 12;
            var ap = (timeNow.getHours() / 12) > 1 ? '下午' : '上午';
            var min = timeNow.getMinutes() < 10 ? ('0' + timeNow.getMinutes()) : timeNow.getMinutes();
            var str = hourShow ? (y+'/'+m+'/'+d+' '+ap+' '+h+':'+min) : y+'/'+m+'/'+d;
            return str;
        },
        //home页独有的逻辑
        home:{
            //首页点击小圆点事件
            /* 参数：
             wrap:小圆点上面对应移动div的类名
             num：当前小圆点的小标
             moveWidth：上面移动一次的宽度
             moveTime:移动的时间
             */
            litteDot:function(obj){
                $(obj.wrap).stop().animate({'left':-obj.num*obj.moveWidth*parseFloat(document.documentElement.style.fontSize)},obj.moveTime)
                if(obj.nextEvent){
                    obj.nextEventOption.currentNum = obj.num;
                    factory[obj.eventName](obj.nextEventOption);
                }
            }
        },
        //详情也独有逻辑
        detail:{
            sale:function(){
                //console.log('sale');
            },
            //将时间戳转化为日期
            getLocalTime:function (nS,n) {
                if(!nS){
                    nS = 1401552000000;
                }else{
                    nS = nS/1;
                }
                return new Date(parseInt(nS)).toLocaleString().substr(0,n)
            },
            jugeSafe:function(n){
                if(n){
                    if( n <= 2.5 ){
                        return "detail_safe";
                    }else if( n <= 5 ){
                        return "detail_common";
                    }else {
                        return "detail_danger";
                    }
                }else{
                    return "detail_safe";
                }

            },
            //点击实现锚点
            anchor:function(n){
                angular.element("html,body").animate({scrollTop:$('.dai_item').eq(n).offset().top - 60},300);
                angular.element('.dai_nav>li').find('a').removeClass('aclicked');
                angular.element('.dai_nav>li').eq(n).find('a').addClass('aclicked');
            },
            //加载detail页面时运行 设置一夜页面的默认值
            sc:function(){
                document.body.scrollTop = 0;
                //angular.element('.desiel_up_wrap').css({'width':37.8*parseFloat(document.documentElement.style.fontSize)});
                //angular.element('.desiel_up_wrap').css({'width':60.48*parseFloat(document.documentElement.style.fontSize)});
                factory.detail.setNav();
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        //innerWidth <= 1000 ? $('body').css({'overflowX':'scroll'}) : $('body').css({'overflowX':'hidden'});
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                };

                //window.onresize = function(){
                //    innerWidth <= 1000 ? $('body').css({'overflowX':'auto'}) : $('body').css({'overflowX':'hidden'});
                //    innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                //    factory.detail.setNav();
                //};
            },
            //判断滚动高度，实现导航fixed
            setNav : function(){
                var n = 0;
                $(window).on('scroll',function(){
                    if(document.body.scrollTop>= 8*parseFloat(document.documentElement.style.fontSize)){
                        $('.dai_nav').css({'position':'fixed','top':0,'left':(innerWidth - 12*parseFloat(document.documentElement.style.fontSize)- 10)/2});
                        $('.dai_nav_ocupy').show();
                    }else{
                        $('.dai_nav').css({'position':'relative','top':0,'left':0});
                        $('.dai_nav_ocupy').hide();
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(0).offset().top){
                        n = 0;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(1).offset().top){
                        n = 1;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(2).offset().top){
                        n = 2;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(3).offset().top){
                        n = 3;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(4).offset().top){
                        n = 4;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(5).offset().top){
                        n = 5;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(6).offset().top){
                        n = 6;
                    }
                    // zw 添加两项
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(7).offset().top){
                        n = 7;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(8).offset().top){
                        n = 8;
                    }
                    angular.element('.dai_nav>li').find('a').removeClass('aclicked');
                    angular.element('.dai_nav>li').eq(n).find('a').addClass('aclicked');
                })
            },
            //点击小图标后上面大图的轮播
            stopTurn : function(n){
                angular.element('.desiel_up_wrap').stop().animate({'left':-n*7.56*parseFloat(document.documentElement.style.fontSize)},1000);
            },
            //当窗口大小发生改变时候图表发生变化
            chartResize : function(obj){
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        //innerWidth <= 1000 ? $('body').css({'overflowX':'scroll'}) : $('body').css({'overflowX':'hidden'});
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                    obj.chart1.resize();
                    obj.chart2.resize();
                    obj.chart3.resize();
                    obj.chart4.resize();
                    obj.chart5.resize();
                };

                //window.onresize = function(){
                //    innerWidth <= 1000 ? $('body').css({'overflowX':'auto'}) : $('body').css({'overflowX':'hidden'});
                //    innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                //    factory.detail.setNav();
                //    obj.chart1.resize();
                //    obj.chart2.resize();
                //    obj.chart3.resize();
                //    obj.chart4.resize();
                //    obj.chart5.resize();
                //}

            },
            //设置图标在数据加载之前的动画
            chartLoading : function(obj){
                obj.chart1.showLoading();
                obj.chart2.showLoading();
                obj.chart3.showLoading();
                obj.chart4.showLoading();
                obj.chart5.showLoading();
            },
            //设置学校分数打印星星函数
            setStar : function(obj){
                switch( Math.ceil(obj.decile/2)){
                    case 0:
                        obj.yellowStar = [];
                        obj.grayStar = [1,2,3,4,5];
                        break;
                    case 1:
                        obj.yellowStar = [1];
                        obj.grayStar = [1,2,3,4];
                        break;
                    case 2:
                        obj.yellowStar = [1,2];
                        obj.grayStar = [1,2,3];
                        break;
                    case 3:
                        obj.yellowStar = [1,2,3];
                        obj.grayStar = [1,2];
                        break;
                    case 4:
                        obj.yellowStar = [1,2,3,4];
                        obj.grayStar = [1];
                        break;
                    case 5:
                        obj.yellowStar = [1,2,3,4,5];
                        obj.grayStar = [];
                        break;
                }
            },
            //给附近房源打点标记
            setNearbyHouseIcon : function(arr,map,arr2,info,IMG){
                var infoArr = [];
                //var infowindow = new google.maps.InfoWindow({maxWidth: 550});
                for(var s = 0,len = arr.length ; s < len ; s++) {
                    arr[s].showInfo = arr[s].basePoint[0] === arr2[0] && arr[s].basePoint[1] === arr2[1] ? true : false;
                    var a = factory.makeDot({
                        name: arr[s]._id,
                        markerPosition:arr[s]._id,
                        position: {lat: arr[s].basePoint[1], lng: arr[s].basePoint[0]},
                        icon: 'http://res.tigerz.nz/imgs/maphoused.png',
                        map: map,
                        animation: 'DROP',
                        showInfo: arr[s].showInfo,
                        infowindow : info,
                        infoOption: {
                            img:IMG+arr[s].houseMainImagePath,
                            houseTitle: arr[s].title,
                            houseId:'/detail_cn?'+arr[s]._id+'&'+arr[s].streetAddress+'&'+arr[s].addressCity,
                            housePrice: arr[s].housePrice,
                            houseAddr: arr[s].streetAddress,
                            bedRoom: arr[s].bedRoom,
                            bathRoom: arr[s].bathRoom,
                            houseNum: 'listing#' + arr[s].listingNo
                        }
                    });
                    infoArr.push(a);
                }
                return infoArr;
            },
            setDealHouseIcon : function(arr,map,arr2,info,IMG){
                var infoArr = [];
                for(var s = 0,len = arr.length ; s < len ; s++) {
                    arr[s].showInfo = arr[s].basePoint[0] === arr2[0] && arr[s].basePoint[1] === arr2[1] ? true : false;
                    var a = factory.makeDot({
                        name: s,
                        markerName:arr[s]._id,
                        position: {lat: arr[s].basePoint[1], lng: arr[s].basePoint[0]},
                        icon: 'http://res.tigerz.nz/imgs/maphoused.png',
                        map: map,
                        animation: 'DROP',
                        showInfo: arr[s].showInfo,
                        infowindow : info,
                        infoOption: {
                            img:IMG+arr[s].coverImgPath,
                            houseTitle: arr[s].title,
                            houseId: 'javascript:void(0)',
                            housePrice: '$ '+arr[s].price,
                            houseAddr: arr[s].hougardenAddress,
                            bedRoom: arr[s].bedrooms,
                            bathRoom: arr[s].bathrooms,
                            houseNum: arr[s].listingNo
                        }
                    });
                    infoArr.push(a);
                }
                return infoArr;
            }
        },
        //house页独有逻辑
        house:{
            //加载detail页面时运行 设置一夜页面的默认值
            sc:function(){
                document.body.scrollTop = 0;
                factory.house.setNav();
                window.onresize = function(){
                    if(window.innerWidth >= 1250){
                        document.documentElement.style.fontSize = '97.66px';
                    }else{
                        innerWidth <= 1000 ? document.documentElement.style.fontSize = '78.13px' : document.documentElement.style.fontSize = innerWidth / 12.8 + 'px';
                    }
                    factory.detail.setNav();
                };
            },
            //判断滚动高度，实现导航fixed
            setNav : function(){
                var n = 0;
                $(window).on('scroll',function(){
                    if(document.body.scrollTop>= 7.5*parseFloat(document.documentElement.style.fontSize)){
                        $('.hai_nav').css({'position':'fixed','top':0,'left':(innerWidth - 12*parseFloat(document.documentElement.style.fontSize) - 10)/2});
                        $('.hai_nav_ocupy').show();
                    }else{
                        $('.hai_nav').css({'position':'relative','top':0,'left':0});
                        $('.hai_nav_ocupy').hide();
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(0).offset().top){
                        n = 0;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(1).offset().top){
                        n = 1;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(2).offset().top){
                        n = 2;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(3).offset().top){
                        n = 3;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(4).offset().top){
                        n = 4;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(5).offset().top){
                        n = 5;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(6).offset().top){
                        n = 6;
                    }
                    if((document.body.scrollTop+120)>=$('.dai_item').eq(7).offset().top){
                        n = 7;
                    }
                    angular.element('.hai_nav>li').find('a').removeClass('aclicked');
                    angular.element('.hai_nav>li').eq(n).find('a').addClass('aclicked');
                })
            },
            //导航锚点设置
            anchor:function(n){
                angular.element("html,body").animate({scrollTop:$('.dai_item').eq(n).offset().top - 60},300);
                angular.element('.hai_nav>li').find('a').removeClass('aclicked');
                angular.element('.hai_nav>li').eq(n).find('a').addClass('aclicked');
            },
        },
        //auction页独有逻辑
        auction:{
            page:function(){
                var ms = {
                    //init:function(obj,args){
                    //    console.log('init')
                    //    //return (function(){
                    //        ms.fillHtml(obj,args);
                    //        ms.bindEvent(obj,args);
                    //    //})();
                    //},
                    //填充html
                    fillHtml:function(obj,args){
                        //return (function(){
                        //    console.log('empty')
                        obj.empty();
                        //上一页
                        if(args.current > 1){
                            obj.append('<a href="javascript:;" class="prevPage">上一页</a>');
                        }else{
                            obj.remove('.prevPage');
                            obj.append('<span class="disabled">上一页</span>');
                        }
                        //中间页码
                        if(args.current != 1 && args.current >= 4 && args.pageCount != 4){
                            obj.append('<a href="javascript:;" class="tcdNumber">'+1+'</a>');
                        }
                        if(args.current-2 > 2 && args.current <= args.pageCount && args.pageCount > 5){
                            obj.append('<span>...</span>');
                        }
                        var start = args.current -2,end = args.current+2;
                        if((start > 1 && args.current < 4)||args.current == 1){
                            end++;
                        }
                        if(args.current > args.pageCount-4 && args.current >= args.pageCount){
                            start--;
                        }
                        for (;start <= end; start++) {
                            if(start <= args.pageCount && start >= 1){
                                if(start != args.current){
                                    obj.append('<a href="javascript:;" class="tcdNumber">'+ start +'</a>');
                                }else{
                                    obj.append('<span class="current">'+ start +'</span>');
                                }
                            }
                        }
                        if(args.current + 2 < args.pageCount - 1 && args.current >= 1 && args.pageCount > 5){
                            obj.append('<span>...</span>');
                        }
                        if(args.current != args.pageCount && args.current < args.pageCount -2  && args.pageCount != 4){
                            obj.append('<a href="javascript:;" class="tcdNumber">'+args.pageCount+'</a>');
                        }
                        //下一页
                        if(args.current < args.pageCount){
                            obj.append('<a href="javascript:;" class="nextPage">下一页</a>');
                        }else{
                            obj.remove('.nextPage');
                            obj.append('<span class="disabled">下一页</span>');
                        }
                        //})();
                    },
                    //绑定事件
                    bindEvent:function(obj,args){
                        //return (function(){
                        obj.on("click","a.tcdNumber",function(){
                            var current = parseInt($(this).text());
                            ms.fillHtml(obj,{"current":current,"pageCount":args.pageCount});
                            if(typeof(args.backFn)=="function"){
                                args.backFn(current);
                            }
                        });
                        //上一页
                        obj.on("click","a.prevPage",function(){
                            var current = parseInt(obj.children("span.current").text());
                            //console.log('prev',current)
                            ms.fillHtml(obj,{"current":current-1,"pageCount":args.pageCount});
                            if(typeof(args.backFn)=="function"){
                                args.backFn(current-1);
                            }
                        });
                        //下一页
                        obj.on("click","a.nextPage",function(){
                            var current = parseInt(obj.children("span.current").text());
                            //console.log('next',current)
                            ms.fillHtml(obj,{"current":current+1,"pageCount":args.pageCount});
                            if(typeof(args.backFn)=="function"){
                                args.backFn(current+1);
                            }
                        });
                        //})();
                    }
                }
                $.fn.createPage = function(options){
                    var args = $.extend({
                        pageCount : 15,
                        current : 1,
                        backFn : function(){}
                    },options);
                    //ms.init(this,args);
                    ms.fillHtml(this,args);
                    ms.bindEvent(this,args);
                }
            }
        }
    }
}]);
